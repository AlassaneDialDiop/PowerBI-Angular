!function(e){function t(i){if(o[i])return o[i].exports;var r=o[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";var i=o(1);t.reportDirective=i["default"];var r=o(2),n=o(3);t.service=n["default"],angular.module("powerbi.global",[]).value("PowerBiGlobal",window.Powerbi),angular.module("powerbi.service",["powerbi.global"]).service("PowerBiService",n["default"]),angular.module("powerbi.components.powerbiReport",["powerbi.service"]).directive("powerbiReport",function(){return new i["default"]}),angular.module("powerbi.components.powerbiComponent",["powerbi.service"]).directive("powerbiComponent",function(){return new r["default"]}),angular.module("powerbi.components",["powerbi.components.powerbiReport","powerbi.components.powerbiComponent"]),angular.module("powerbi",["powerbi.service","powerbi.components"])},function(e,t){"use strict";var o=function(){function e(e,t,o){this.$scope=e,this.$timeout=t,this.powerBiService=o}return e.prototype.init=function(e){var t=this;this.validateRequiredAttributes()&&this.embed(e);var o=this.debounce(function(){t.validateRequiredAttributes()?t.embed(e):t.component&&t.reset(e)},100);this.$scope.$watch(function(){return t.embedUrl},function(t,i){t!==i&&o(e)}),this.$scope.$watch(function(){return t.accessToken},function(t,i){t!==i&&o(e)})},e.prototype.embed=function(e){var t={type:"report",embedUrl:this.embedUrl,accessToken:this.accessToken};angular.extend(t,this.options),this.component=this.powerBiService.embed(e,t)},e.prototype.reset=function(e){this.powerBiService.reset(e),this.component=null},e.prototype.debounce=function(e,t){var o,i=this;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];o&&i.$timeout.cancel(o),o=i.$timeout(function(){return e.apply(void 0,r)},t)}},e.prototype.validateRequiredAttributes=function(){return"string"==typeof this.embedUrl&&this.embedUrl.length>0&&"string"==typeof this.accessToken&&this.accessToken.length>0},e.$inject=["$scope","$timeout","PowerBiService"],e}();t.Controller=o;var i=function(){function e(){this.restrict="E",this.replace=!0,this.template='<div class="powerbi-frame"></div>',this.scope={accessToken:"=",embedUrl:"=",options:"=?"},this.controller=o,this.bindToController=!0,this.controllerAs="vm"}return e.prototype.link=function(e,t,o,i,r){i.init(t[0]),e.$on("$destroy",function(){i.reset(t[0])})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t){"use strict";var o=function(){function e(e,t){this.$scope=e,this.powerBiService=t,this.validationMap={report:this.validateReportOptions}}return e.prototype.init=function(e){var t=this;this.validateOptions(this.options)&&this.embed(e,this.options),this.$scope.$watch(function(){return t.options},function(o,i){o!==i&&(t.validateOptions(t.options)?t.embed(e,t.options):t.component&&t.reset(e))},!0)},e.prototype.embed=function(e,t){this.component=this.powerBiService.embed(e,t)},e.prototype.reset=function(e){this.powerBiService.reset(e),this.component=null},e.prototype.validateOptions=function(e){return this.options&&"string"==typeof e.embedUrl&&e.embedUrl.length>0&&"string"==typeof e.accessToken&&e.accessToken.length>0&&this.validationMap.hasOwnProperty(e.type)&&"function"==typeof this.validationMap[e.type]?this.validationMap[e.type](e):!1},e.prototype.validateReportOptions=function(e){return!0},e.$inject=["$scope","PowerBiService"],e}();t.Controller=o;var i=function(){function e(){this.restrict="E",this.replace=!0,this.template='<div class="powerbi-frame"></div>',this.scope={accessToken:"=",embedUrl:"=",options:"=?"},this.controller=o,this.bindToController=!0,this.controllerAs="vm"}return e.prototype.link=function(e,t,o,i,r){i.init(t[0]),e.$on("$destroy",function(){i.reset(t[0])})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t){"use strict";var o=function(){function e(e){this.powerBiCoreService=new e}return e.prototype.embed=function(e,t){return this.powerBiCoreService.embed(e,t)},e.prototype.reset=function(e){this.powerBiCoreService.reset(e)},e.$inject=["PowerBiGlobal"],e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItcG93ZXJiaS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJjb21wb25lbnRfMSIsInJlcG9ydERpcmVjdGl2ZSIsImNvbXBvbmVudF8yIiwicG93ZXJiaV8xIiwic2VydmljZSIsImFuZ3VsYXIiLCJ2YWx1ZSIsIndpbmRvdyIsIlBvd2VyYmkiLCJkaXJlY3RpdmUiLCJDb250cm9sbGVyIiwiJHNjb3BlIiwiJHRpbWVvdXQiLCJwb3dlckJpU2VydmljZSIsInRoaXMiLCJwcm90b3R5cGUiLCJpbml0IiwiZWxlbWVudCIsIl90aGlzIiwidmFsaWRhdGVSZXF1aXJlZEF0dHJpYnV0ZXMiLCJlbWJlZCIsImRlYm91bmNlZEVtYmVkIiwiZGVib3VuY2UiLCJjb21wb25lbnQiLCJyZXNldCIsIiR3YXRjaCIsImVtYmVkVXJsIiwib2xkRW1iZWRVcmwiLCJhY2Nlc3NUb2tlbiIsIm9sZEFjY2Vzc1Rva2VuIiwiY29uZmlnIiwidHlwZSIsImV4dGVuZCIsIm9wdGlvbnMiLCJmdW5jIiwid2FpdCIsInByZXZpb3VzVGltZW91dFByb21pc2UiLCJhcmdzIiwiX2kiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJjYW5jZWwiLCJhcHBseSIsIiRpbmplY3QiLCJEaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJ0ZW1wbGF0ZSIsInNjb3BlIiwiY29udHJvbGxlciIsImJpbmRUb0NvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJsaW5rIiwiYXR0cmlidXRlcyIsInRyYW5zY2x1ZGVGbiIsIiRvbiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsaWRhdGlvbk1hcCIsInJlcG9ydCIsInZhbGlkYXRlUmVwb3J0T3B0aW9ucyIsInZhbGlkYXRlT3B0aW9ucyIsIm9sZE9wdGlvbnMiLCJoYXNPd25Qcm9wZXJ0eSIsIlBvd2VyQmlTZXJ2aWNlIiwiUG93ZXJCaSIsInBvd2VyQmlDb3JlU2VydmljZSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0FLVCxRQUFTQyxHQUFvQkMsR0FHNUIsR0FBR0MsRUFBaUJELEdBQ25CLE1BQU9DLEdBQWlCRCxHQUFVRSxPQUduQyxJQUFJQyxHQUFTRixFQUFpQkQsSUFDN0JFLFdBQ0FFLEdBQUlKLEVBQ0pLLFFBQVEsRUFVVCxPQU5BUCxHQUFRRSxHQUFVTSxLQUFLSCxFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTSCxHQUcvREksRUFBT0UsUUFBUyxFQUdURixFQUFPRCxRQXZCZixHQUFJRCxLQXFDSixPQVRBRixHQUFvQlEsRUFBSVQsRUFHeEJDLEVBQW9CUyxFQUFJUCxFQUd4QkYsRUFBb0JVLEVBQUksR0FHakJWLEVBQW9CLEtBSy9CLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CLFlBQ0EsSUFBSVcsR0FBY1gsRUFBb0IsRUFDdENHLEdBQVFTLGdCQUFrQkQsRUFBQUEsVUFDMUIsSUFBSUUsR0FBY2IsRUFBb0IsR0FDbENjLEVBQVlkLEVBQW9CLEVBQ3BDRyxHQUFRWSxRQUFVRCxFQUFBQSxXQUNsQkUsUUFBUVosT0FBTyxxQkFDVmEsTUFBTSxnQkFBaUJDLE9BQU9DLFNBQ25DSCxRQUFRWixPQUFPLG1CQUNYLG1CQUVDVyxRQUFRLGlCQUFxQ0QsRUFBQUEsWUFDbERFLFFBQVFaLE9BQU8sb0NBQ1gsb0JBRUNnQixVQUFVLGdCQUE0QyxXQUFjLE1BQU8sSUFBSVQsR0FBQUEsYUFDcEZLLFFBQVFaLE9BQU8sdUNBQ1gsb0JBRUNnQixVQUFVLG1CQUFrRCxXQUFjLE1BQU8sSUFBSVAsR0FBQUEsYUFDMUZHLFFBQVFaLE9BQU8sc0JBQ1gsbUNBQ0Esd0NBRUpZLFFBQVFaLE9BQU8sV0FDWCxrQkFDQSx3QkFNQyxTQUFTQSxFQUFRRCxHQUV0QixZQUNBLElBQUlrQixHQUFjLFdBQ2QsUUFBU0EsR0FBV0MsRUFBUUMsRUFBVUMsR0FD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RUFBTzRDLElBQUksV0FBWSxXQUNuQk4sRUFBV3pCLE1BQU1QLEVBQVEsT0FHMUIyQixJQUVYWSxRQUFPQyxlQUFlakUsRUFBUyxjQUFnQmMsT0FBTyxJQUN0RGQsRUFBQUEsV0FBa0JvRCxHQUtiLFNBQVNuRCxFQUFRRCxHQUV0QixZQUNBLElBQUl3RSxHQUFrQixXQUNsQixRQUFTQSxHQUFlQyxHQUNwQm5ELEtBQUtvRCxtQkFBcUIsR0FBSUQsR0FXbEMsTUFUQUQsR0FBZWpELFVBQVVLLE1BQVEsU0FBVUgsRUFBU2EsR0FDaEQsTUFBT2hCLE1BQUtvRCxtQkFBbUI5QyxNQUFNSCxFQUFTYSxJQUVsRGtDLEVBQWVqRCxVQUFVUyxNQUFRLFNBQVVQLEdBQ3ZDSCxLQUFLb0QsbUJBQW1CMUMsTUFBTVAsSUFFbEMrQyxFQUFlckIsU0FDWCxpQkFFR3FCLElBRVhSLFFBQU9DLGVBQWVqRSxFQUFTLGNBQWdCYyxPQUFPLElBQ3REZCxFQUFBQSxXQUFrQndFIiwiZmlsZSI6ImFuZ3VsYXItcG93ZXJiaS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIGNvbXBvbmVudF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcclxuXHRleHBvcnRzLnJlcG9ydERpcmVjdGl2ZSA9IGNvbXBvbmVudF8xLmRlZmF1bHQ7XHJcblx0dmFyIGNvbXBvbmVudF8yID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxuXHR2YXIgcG93ZXJiaV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcclxuXHRleHBvcnRzLnNlcnZpY2UgPSBwb3dlcmJpXzEuZGVmYXVsdDtcclxuXHRhbmd1bGFyLm1vZHVsZSgncG93ZXJiaS5nbG9iYWwnLCBbXSlcclxuXHQgICAgLnZhbHVlKCdQb3dlckJpR2xvYmFsJywgd2luZG93LlBvd2VyYmkpO1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdwb3dlcmJpLnNlcnZpY2UnLCBbXHJcblx0ICAgICdwb3dlcmJpLmdsb2JhbCdcclxuXHRdKVxyXG5cdCAgICAuc2VydmljZSgnUG93ZXJCaVNlcnZpY2UnIC8qIHNlcnZpY2UubmFtZSAqLywgcG93ZXJiaV8xLmRlZmF1bHQpO1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdwb3dlcmJpLmNvbXBvbmVudHMucG93ZXJiaVJlcG9ydCcsIFtcclxuXHQgICAgJ3Bvd2VyYmkuc2VydmljZSdcclxuXHRdKVxyXG5cdCAgICAuZGlyZWN0aXZlKCdwb3dlcmJpUmVwb3J0JyAvKiByZXBvcnREaXJlY3RpdmUubmFtZSAqLywgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IGNvbXBvbmVudF8xLmRlZmF1bHQoKTsgfSk7XHJcblx0YW5ndWxhci5tb2R1bGUoJ3Bvd2VyYmkuY29tcG9uZW50cy5wb3dlcmJpQ29tcG9uZW50JywgW1xyXG5cdCAgICAncG93ZXJiaS5zZXJ2aWNlJ1xyXG5cdF0pXHJcblx0ICAgIC5kaXJlY3RpdmUoJ3Bvd2VyYmlDb21wb25lbnQnIC8qIGNvbXBvbmVudERpcmVjdGl2ZS5uYW1lICovLCBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgY29tcG9uZW50XzIuZGVmYXVsdCgpOyB9KTtcclxuXHRhbmd1bGFyLm1vZHVsZSgncG93ZXJiaS5jb21wb25lbnRzJywgW1xyXG5cdCAgICAncG93ZXJiaS5jb21wb25lbnRzLnBvd2VyYmlSZXBvcnQnLFxyXG5cdCAgICAncG93ZXJiaS5jb21wb25lbnRzLnBvd2VyYmlDb21wb25lbnQnXHJcblx0XSk7XHJcblx0YW5ndWxhci5tb2R1bGUoJ3Bvd2VyYmknLCBbXHJcblx0ICAgICdwb3dlcmJpLnNlcnZpY2UnLFxyXG5cdCAgICAncG93ZXJiaS5jb21wb25lbnRzJ1xyXG5cdF0pO1xyXG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0LCBwb3dlckJpU2VydmljZSkge1xyXG5cdCAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcblx0ICAgICAgICB0aGlzLiR0aW1lb3V0ID0gJHRpbWVvdXQ7XHJcblx0ICAgICAgICB0aGlzLnBvd2VyQmlTZXJ2aWNlID0gcG93ZXJCaVNlcnZpY2U7XHJcblx0ICAgIH1cclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEhhbmRsZXIgYWZ0ZXIgY29tcG9uZW50IGlzIGluc2VydGVkIGluIHRoZSBET00uIElmIHJlcXVpcmVkIGF0dHJpYnV0ZXMgYXJlIHZhbGlkIGVtYmVkIGltbWVkaWF0ZWx5XHJcblx0ICAgICAqIG90aGVyd2lzZSwgd2F0Y2ggYXR0cmlidXRlcyBhbmQgZW1iZWQgd2hlbiB0aGV5IGFyZSB2YWxpZC5cclxuXHQgICAgICovXHJcblx0ICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlUmVxdWlyZWRBdHRyaWJ1dGVzKCkpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmVtYmVkKGVsZW1lbnQpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgLy8gVE9ETzogTG9vayBmb3IgYW5vdGhlciB3YXkgdG8gZW5zdXJlIGJvdGggYXR0cmlidXRlcyBoYXZlIGNoYW5nZWQgYmVmb3JlIGNhbGxpbmcgdGhpcy5lbWJlZC5cclxuXHQgICAgICAgIC8vIEluIG1vc3QgY2FzZXMgZW1iZWRVcmwgYW5kIGFjY2Vzc1Rva2VuIHdpbGwgYmUgdXBkYXRlZCBhdCB0aGUgc2FtZSB0aW1lLCBidXQgdGhpcyB0YWtlcyB0d28gY3ljbGVzXHJcblx0ICAgICAgICAvLyBmb3IgdGhlIGNoYW5nZXMgdG8gcHJvcGVnYXRlIGZyb20gdGhlIHBhcmVudCAkc2NvcGUgdG8gdGhpcyAkc2NvcGUuXHJcblx0ICAgICAgICAvLyBwZXJoYXBzIHdlIGNhbiBqdXN0IHVzZSAkdGltZW91dCgpIGRpcmVjdGx5LiBcclxuXHQgICAgICAgIHZhciBkZWJvdW5jZWRFbWJlZCA9IHRoaXMuZGVib3VuY2UoZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgICAgIGlmIChfdGhpcy52YWxpZGF0ZVJlcXVpcmVkQXR0cmlidXRlcygpKSB7XHJcblx0ICAgICAgICAgICAgICAgIF90aGlzLmVtYmVkKGVsZW1lbnQpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBlbHNlIGlmIChfdGhpcy5jb21wb25lbnQpIHtcclxuXHQgICAgICAgICAgICAgICAgX3RoaXMucmVzZXQoZWxlbWVudCk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfSwgMTAwKTtcclxuXHQgICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5lbWJlZFVybDsgfSwgZnVuY3Rpb24gKGVtYmVkVXJsLCBvbGRFbWJlZFVybCkge1xyXG5cdCAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3QgaW5pdGlhbGl6YXRpb25cclxuXHQgICAgICAgICAgICBpZiAoZW1iZWRVcmwgPT09IG9sZEVtYmVkVXJsKSB7XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgZGVib3VuY2VkRW1iZWQoZWxlbWVudCk7XHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5hY2Nlc3NUb2tlbjsgfSwgZnVuY3Rpb24gKGFjY2Vzc1Rva2VuLCBvbGRBY2Nlc3NUb2tlbikge1xyXG5cdCAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3QgaW5pdGlhbGl6YXRpb25cclxuXHQgICAgICAgICAgICBpZiAoYWNjZXNzVG9rZW4gPT09IG9sZEFjY2Vzc1Rva2VuKSB7XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgZGVib3VuY2VkRW1iZWQoZWxlbWVudCk7XHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEdpdmVuIGFuIEhUTUxFbGVtZW50LCBjb25zdHJ1Y3QgYW4gZW1iZWQgY29uZmlndXJhdGlvbiBiYXNlZCBvbiBhdHRyaWJ1dGVzIGFuZCBwYXNzIHRvIHNlcnZpY2UuXHJcblx0ICAgICAqL1xyXG5cdCAgICBDb250cm9sbGVyLnByb3RvdHlwZS5lbWJlZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcblx0ICAgICAgICB2YXIgY29uZmlnID0ge1xyXG5cdCAgICAgICAgICAgIHR5cGU6ICdyZXBvcnQnLFxyXG5cdCAgICAgICAgICAgIGVtYmVkVXJsOiB0aGlzLmVtYmVkVXJsLFxyXG5cdCAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuXHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgYW5ndWxhci5leHRlbmQoY29uZmlnLCB0aGlzLm9wdGlvbnMpO1xyXG5cdCAgICAgICAgdGhpcy5jb21wb25lbnQgPSB0aGlzLnBvd2VyQmlTZXJ2aWNlLmVtYmVkKGVsZW1lbnQsIGNvbmZpZyk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBIYW5kbGVyIHdoZW4gY29tcG9uZW50IGlzIHJlbW92ZWQgZnJvbSBET00uIEZvcndhcmRzIGNhbGwgdG8gc2VydmljZSB0byBwZXJmb3JtIGNsZWFudXAgb2YgcmVmZXJlbmNlcyBiZWZvcmUgRE9NIGlzIG1vZGlmaWVkLlxyXG5cdCAgICAgKi9cclxuXHQgICAgQ29udHJvbGxlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG5cdCAgICAgICAgdGhpcy5wb3dlckJpU2VydmljZS5yZXNldChlbGVtZW50KTtcclxuXHQgICAgICAgIHRoaXMuY29tcG9uZW50ID0gbnVsbDtcclxuXHQgICAgfTtcclxuXHQgICAgQ29udHJvbGxlci5wcm90b3R5cGUuZGVib3VuY2UgPSBmdW5jdGlvbiAoZnVuYywgd2FpdCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHZhciBwcmV2aW91c1RpbWVvdXRQcm9taXNlO1xyXG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG5cdCAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcblx0ICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGlmIChwcmV2aW91c1RpbWVvdXRQcm9taXNlKSB7XHJcblx0ICAgICAgICAgICAgICAgIF90aGlzLiR0aW1lb3V0LmNhbmNlbChwcmV2aW91c1RpbWVvdXRQcm9taXNlKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgcHJldmlvdXNUaW1lb3V0UHJvbWlzZSA9IF90aGlzLiR0aW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmMuYXBwbHkodm9pZCAwLCBhcmdzKTsgfSwgd2FpdCk7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRW5zdXJlIHJlcXVpcmVkIGF0dHJpYnV0ZXMgKGVtYmVkVXJsIGFuZCBhY2Nlc3NUb2tlbiBhcmUgdmFsaWQgYmVmb3JlIGF0dGVtcHRpbmcgdG8gZW1iZWQpXHJcblx0ICAgICAqL1xyXG5cdCAgICBDb250cm9sbGVyLnByb3RvdHlwZS52YWxpZGF0ZVJlcXVpcmVkQXR0cmlidXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiAodHlwZW9mIHRoaXMuZW1iZWRVcmwgPT09ICdzdHJpbmcnICYmIHRoaXMuZW1iZWRVcmwubGVuZ3RoID4gMClcclxuXHQgICAgICAgICAgICAmJiAodHlwZW9mIHRoaXMuYWNjZXNzVG9rZW4gPT09ICdzdHJpbmcnICYmIHRoaXMuYWNjZXNzVG9rZW4ubGVuZ3RoID4gMCk7XHJcblx0ICAgIH07XHJcblx0ICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuXHQgICAgICAgICckc2NvcGUnLFxyXG5cdCAgICAgICAgJyR0aW1lb3V0JyxcclxuXHQgICAgICAgICdQb3dlckJpU2VydmljZSdcclxuXHQgICAgXTtcclxuXHQgICAgcmV0dXJuIENvbnRyb2xsZXI7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLkNvbnRyb2xsZXIgPSBDb250cm9sbGVyO1xyXG5cdHZhciBEaXJlY3RpdmUgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBEaXJlY3RpdmUoKSB7XHJcblx0ICAgICAgICAvLyBzdGF0aWMgbmFtZSA9IFwicG93ZXJiaVJlcG9ydFwiO1xyXG5cdCAgICAgICAgdGhpcy5yZXN0cmljdCA9IFwiRVwiO1xyXG5cdCAgICAgICAgdGhpcy5yZXBsYWNlID0gdHJ1ZTtcclxuXHQgICAgICAgIHRoaXMudGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cInBvd2VyYmktZnJhbWVcIj48L2Rpdj4nO1xyXG5cdCAgICAgICAgdGhpcy5zY29wZSA9IHtcclxuXHQgICAgICAgICAgICBhY2Nlc3NUb2tlbjogXCI9XCIsXHJcblx0ICAgICAgICAgICAgZW1iZWRVcmw6IFwiPVwiLFxyXG5cdCAgICAgICAgICAgIG9wdGlvbnM6IFwiPT9cIlxyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHRoaXMuY29udHJvbGxlciA9IENvbnRyb2xsZXI7XHJcblx0ICAgICAgICB0aGlzLmJpbmRUb0NvbnRyb2xsZXIgPSB0cnVlO1xyXG5cdCAgICAgICAgdGhpcy5jb250cm9sbGVyQXMgPSBcInZtXCI7XHJcblx0ICAgIH1cclxuXHQgICAgRGlyZWN0aXZlLnByb3RvdHlwZS5saW5rID0gZnVuY3Rpb24gKCRzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgY29udHJvbGxlciwgdHJhbnNjbHVkZUZuKSB7XHJcblx0ICAgICAgICBjb250cm9sbGVyLmluaXQoZWxlbWVudFswXSk7XHJcblx0ICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICBjb250cm9sbGVyLnJlc2V0KGVsZW1lbnRbMF0pO1xyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBEaXJlY3RpdmU7XHJcblx0fSgpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRGlyZWN0aXZlO1xyXG5cblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsIHBvd2VyQmlTZXJ2aWNlKSB7XHJcblx0ICAgICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcclxuXHQgICAgICAgIHRoaXMucG93ZXJCaVNlcnZpY2UgPSBwb3dlckJpU2VydmljZTtcclxuXHQgICAgICAgIHRoaXMudmFsaWRhdGlvbk1hcCA9IHtcclxuXHQgICAgICAgICAgICAncmVwb3J0JzogdGhpcy52YWxpZGF0ZVJlcG9ydE9wdGlvbnNcclxuXHQgICAgICAgIH07XHJcblx0ICAgIH1cclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEhhbmRsZXIgYWZ0ZXIgY29tcG9uZW50IGlzIGluc2VydGVkIGluIHRoZSBET00uIElmIHJlcXVpcmVkIGF0dHJpYnV0ZXMgYXJlIHZhbGlkIGVtYmVkIGltbWVkaWF0ZWx5XHJcblx0ICAgICAqIG90aGVyd2lzZSwgd2F0Y2ggYXR0cmlidXRlcyBhbmQgZW1iZWQgd2hlbiB0aGV5IGFyZSB2YWxpZC5cclxuXHQgICAgICovXHJcblx0ICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlT3B0aW9ucyh0aGlzLm9wdGlvbnMpKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5lbWJlZChlbGVtZW50LCB0aGlzLm9wdGlvbnMpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdGhpcy4kc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm9wdGlvbnM7IH0sIGZ1bmN0aW9uIChvcHRpb25zLCBvbGRPcHRpb25zKSB7XHJcblx0ICAgICAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCBpbml0aWFsaXphdGlvblxyXG5cdCAgICAgICAgICAgIGlmIChvcHRpb25zID09PSBvbGRPcHRpb25zKSB7XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgaWYgKF90aGlzLnZhbGlkYXRlT3B0aW9ucyhfdGhpcy5vcHRpb25zKSkge1xyXG5cdCAgICAgICAgICAgICAgICBfdGhpcy5lbWJlZChlbGVtZW50LCBfdGhpcy5vcHRpb25zKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMuY29tcG9uZW50KSB7XHJcblx0ICAgICAgICAgICAgICAgIF90aGlzLnJlc2V0KGVsZW1lbnQpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH0sIHRydWUpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogR2l2ZW4gYW4gSFRNTEVsZW1lbnQsIGNvbnN0cnVjdCBhbiBlbWJlZCBjb25maWd1cmF0aW9uIGJhc2VkIG9uIGF0dHJpYnV0ZXMgYW5kIHBhc3MgdG8gc2VydmljZS5cclxuXHQgICAgICovXHJcblx0ICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmVtYmVkID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuXHQgICAgICAgIHRoaXMuY29tcG9uZW50ID0gdGhpcy5wb3dlckJpU2VydmljZS5lbWJlZChlbGVtZW50LCBvcHRpb25zKTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEhhbmRsZXIgd2hlbiBjb21wb25lbnQgaXMgcmVtb3ZlZCBmcm9tIERPTS4gRm9yd2FyZHMgY2FsbCB0byBzZXJ2aWNlIHRvIHBlcmZvcm0gY2xlYW51cCBvZiByZWZlcmVuY2VzIGJlZm9yZSBET00gaXMgbW9kaWZpZWQuXHJcblx0ICAgICAqL1xyXG5cdCAgICBDb250cm9sbGVyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcblx0ICAgICAgICB0aGlzLnBvd2VyQmlTZXJ2aWNlLnJlc2V0KGVsZW1lbnQpO1xyXG5cdCAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRW5zdXJlIHJlcXVpcmVkIG9wdGlvbnMgKGVtYmVkVXJsIGFuZCBhY2Nlc3NUb2tlbiBhcmUgdmFsaWQgYmVmb3JlIGF0dGVtcHRpbmcgdG8gZW1iZWQpXHJcblx0ICAgICAqL1xyXG5cdCAgICBDb250cm9sbGVyLnByb3RvdHlwZS52YWxpZGF0ZU9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG5cdCAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnNcclxuXHQgICAgICAgICAgICB8fCAhKHR5cGVvZiBvcHRpb25zLmVtYmVkVXJsID09PSAnc3RyaW5nJyAmJiBvcHRpb25zLmVtYmVkVXJsLmxlbmd0aCA+IDApXHJcblx0ICAgICAgICAgICAgfHwgISh0eXBlb2Ygb3B0aW9ucy5hY2Nlc3NUb2tlbiA9PT0gJ3N0cmluZycgJiYgb3B0aW9ucy5hY2Nlc3NUb2tlbi5sZW5ndGggPiAwKSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGlmICh0aGlzLnZhbGlkYXRpb25NYXAuaGFzT3duUHJvcGVydHkob3B0aW9ucy50eXBlKSAmJiB0eXBlb2YgdGhpcy52YWxpZGF0aW9uTWFwW29wdGlvbnMudHlwZV0gPT09IFwiZnVuY3Rpb25cIikge1xyXG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRpb25NYXBbb3B0aW9ucy50eXBlXShvcHRpb25zKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgQ29udHJvbGxlci5wcm90b3R5cGUudmFsaWRhdGVSZXBvcnRPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHQgICAgICAgIHJldHVybiB0cnVlO1xyXG5cdCAgICB9O1xyXG5cdCAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXHJcblx0ICAgICAgICAnJHNjb3BlJyxcclxuXHQgICAgICAgICdQb3dlckJpU2VydmljZSdcclxuXHQgICAgXTtcclxuXHQgICAgcmV0dXJuIENvbnRyb2xsZXI7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLkNvbnRyb2xsZXIgPSBDb250cm9sbGVyO1xyXG5cdHZhciBEaXJlY3RpdmUgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBEaXJlY3RpdmUoKSB7XHJcblx0ICAgICAgICAvLyBzdGF0aWMgbmFtZSA9IFwicG93ZXJiaUNvbXBvbmVudFwiO1xyXG5cdCAgICAgICAgdGhpcy5yZXN0cmljdCA9IFwiRVwiO1xyXG5cdCAgICAgICAgdGhpcy5yZXBsYWNlID0gdHJ1ZTtcclxuXHQgICAgICAgIHRoaXMudGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cInBvd2VyYmktZnJhbWVcIj48L2Rpdj4nO1xyXG5cdCAgICAgICAgdGhpcy5zY29wZSA9IHtcclxuXHQgICAgICAgICAgICBhY2Nlc3NUb2tlbjogXCI9XCIsXHJcblx0ICAgICAgICAgICAgZW1iZWRVcmw6IFwiPVwiLFxyXG5cdCAgICAgICAgICAgIG9wdGlvbnM6IFwiPT9cIlxyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHRoaXMuY29udHJvbGxlciA9IENvbnRyb2xsZXI7XHJcblx0ICAgICAgICB0aGlzLmJpbmRUb0NvbnRyb2xsZXIgPSB0cnVlO1xyXG5cdCAgICAgICAgdGhpcy5jb250cm9sbGVyQXMgPSBcInZtXCI7XHJcblx0ICAgIH1cclxuXHQgICAgRGlyZWN0aXZlLnByb3RvdHlwZS5saW5rID0gZnVuY3Rpb24gKCRzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgY29udHJvbGxlciwgdHJhbnNjbHVkZUZuKSB7XHJcblx0ICAgICAgICBjb250cm9sbGVyLmluaXQoZWxlbWVudFswXSk7XHJcblx0ICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICBjb250cm9sbGVyLnJlc2V0KGVsZW1lbnRbMF0pO1xyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBEaXJlY3RpdmU7XHJcblx0fSgpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRGlyZWN0aXZlO1xyXG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBQb3dlckJpU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFBvd2VyQmlTZXJ2aWNlKFBvd2VyQmkpIHtcclxuXHQgICAgICAgIHRoaXMucG93ZXJCaUNvcmVTZXJ2aWNlID0gbmV3IFBvd2VyQmkoKTtcclxuXHQgICAgfVxyXG5cdCAgICBQb3dlckJpU2VydmljZS5wcm90b3R5cGUuZW1iZWQgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29uZmlnKSB7XHJcblx0ICAgICAgICByZXR1cm4gdGhpcy5wb3dlckJpQ29yZVNlcnZpY2UuZW1iZWQoZWxlbWVudCwgY29uZmlnKTtcclxuXHQgICAgfTtcclxuXHQgICAgUG93ZXJCaVNlcnZpY2UucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuXHQgICAgICAgIHRoaXMucG93ZXJCaUNvcmVTZXJ2aWNlLnJlc2V0KGVsZW1lbnQpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBQb3dlckJpU2VydmljZS4kaW5qZWN0ID0gW1xyXG5cdCAgICAgICAgJ1Bvd2VyQmlHbG9iYWwnXHJcblx0ICAgIF07XHJcblx0ICAgIHJldHVybiBQb3dlckJpU2VydmljZTtcclxuXHR9KCkpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHRleHBvcnRzLmRlZmF1bHQgPSBQb3dlckJpU2VydmljZTtcclxuXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci1wb3dlcmJpLmpzLm1hcCJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
