!function(e){function t(r){if(o[r])return o[r].exports;var i=o[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";var r=o(1);t.reportDirective=r["default"];var i=o(2);t.service=i["default"],angular.module("powerbi.global",[]).value("PowerBiGlobal",window.Powerbi),angular.module("powerbi.service",["powerbi.global"]).service("PowerBiService",i["default"]),angular.module("powerbi.components.powerbiReport",["powerbi.service"]).directive("powerbiReport",function(){return new r["default"]}),angular.module("powerbi.components",["powerbi.components.powerbiReport"]),angular.module("powerbi",["powerbi.service","powerbi.components"])},function(e,t){"use strict";var o=function(){function e(e,t,o){this.$scope=e,this.$timeout=t,this.powerBiService=o}return e.prototype.init=function(e){var t=this;this.validateRequiredAttributes()&&this.embed(e);var o=this.debounce(this.embed.bind(this),100);this.$scope.$watch(function(){return t.embedUrl},function(r,i){r!==i&&t.validateRequiredAttributes()&&o(e)}),this.$scope.$watch(function(){return t.accessToken},function(r,i){r!==i&&t.validateRequiredAttributes()&&o(e)})},e.prototype.embed=function(e){var t={type:"report",embedUrl:this.embedUrl,accessToken:this.accessToken};angular.extend(t,this.options),this.component=this.powerBiService.embed(e,t)},e.prototype.remove=function(e){this.powerBiService.remove(this.component)},e.prototype.debounce=function(e,t){var o,r=this;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n-0]=arguments[n];o&&r.$timeout.cancel(o),o=r.$timeout(function(){return e.apply(void 0,i)},t)}},e.prototype.validateRequiredAttributes=function(){return"string"==typeof this.embedUrl&&this.embedUrl.length>0&&"string"==typeof this.accessToken&&this.accessToken.length>0},e.$inject=["$scope","$timeout","PowerBiService"],e}();t.Controller=o;var r=function(){function e(){this.restrict="E",this.replace=!0,this.template='<div class="powerbi-frame"></div>',this.scope={accessToken:"=",embedUrl:"=",options:"=?"},this.controller=o,this.bindToController=!0,this.controllerAs="vm"}return e.prototype.link=function(e,t,o,r,i){r.init(t[0]),e.$on("$destroy",function(){r.remove(r.component)})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t){"use strict";var o=function(){function e(e){this.powerBiCoreService=new e}return e.prototype.embed=function(e,t){return this.powerBiCoreService.embed(e,t)},e.prototype.remove=function(e){this.powerBiCoreService.remove(e)},e.$inject=["PowerBiGlobal"],e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItcG93ZXJiaS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJjb21wb25lbnRfMSIsInJlcG9ydERpcmVjdGl2ZSIsInBvd2VyYmlfMSIsInNlcnZpY2UiLCJhbmd1bGFyIiwidmFsdWUiLCJ3aW5kb3ciLCJQb3dlcmJpIiwiZGlyZWN0aXZlIiwiQ29udHJvbGxlciIsIiRzY29wZSIsIiR0aW1lb3V0IiwicG93ZXJCaVNlcnZpY2UiLCJ0aGlzIiwicHJvdG90eXBlIiwiaW5pdCIsImVsZW1lbnQiLCJfdGhpcyIsInZhbGlkYXRlUmVxdWlyZWRBdHRyaWJ1dGVzIiwiZW1iZWQiLCJkZWJvdW5jZWRFbWJlZCIsImRlYm91bmNlIiwiYmluZCIsIiR3YXRjaCIsImVtYmVkVXJsIiwib2xkRW1iZWRVcmwiLCJhY2Nlc3NUb2tlbiIsIm9sZEFjY2Vzc1Rva2VuIiwiY29uZmlnIiwidHlwZSIsImV4dGVuZCIsIm9wdGlvbnMiLCJjb21wb25lbnQiLCJyZW1vdmUiLCJmdW5jIiwid2FpdCIsInByZXZpb3VzVGltZW91dFByb21pc2UiLCJhcmdzIiwiX2kiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJjYW5jZWwiLCJhcHBseSIsIiRpbmplY3QiLCJEaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJ0ZW1wbGF0ZSIsInNjb3BlIiwiY29udHJvbGxlciIsImJpbmRUb0NvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJsaW5rIiwiYXR0cmlidXRlcyIsInRyYW5zY2x1ZGVGbiIsIiRvbiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiUG93ZXJCaVNlcnZpY2UiLCJQb3dlckJpIiwicG93ZXJCaUNvcmVTZXJ2aWNlIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQUtU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LFNBQVcsSUFDaEJoQyxLQUFLaUMsU0FBVSxFQUNmakMsS0FBS2tDLFNBQVcsb0NBQ2hCbEMsS0FBS21DLE9BQ0R0QixZQUFhLElBQ2JGLFNBQVUsSUFDVk8sUUFBUyxNQUVibEIsS0FBS29DLFdBQWF4QyxFQUNsQkksS0FBS3FDLGtCQUFtQixFQUN4QnJDLEtBQUtzQyxhQUFlLEtBUXhCLE1BTkFQLEdBQVU5QixVQUFVc0MsS0FBTyxTQUFVMUMsRUFBUU0sRUFBU3FDLEVBQVlKLEVBQVlLLEdBQzFFTCxFQUFXbEMsS0FBS0MsRUFBUSxJQUN4Qk4sRUFBTzZDLElBQUksV0FBWSxXQUNuQk4sRUFBV2hCLE9BQU9nQixFQUFXakIsY0FHOUJZLElBRVhZLFFBQU9DLGVBQWVqRSxFQUFTLGNBQWdCYSxPQUFPLElBQ3REYixFQUFBQSxXQUFrQm9ELEdBS2IsU0FBU25ELEVBQVFELEdBRXRCLFlBQ0EsSUFBSWtFLEdBQWtCLFdBQ2xCLFFBQVNBLEdBQWVDLEdBQ3BCOUMsS0FBSytDLG1CQUFxQixHQUFJRCxHQVdsQyxNQVRBRCxHQUFlNUMsVUFBVUssTUFBUSxTQUFVSCxFQUFTWSxHQUNoRCxNQUFPZixNQUFLK0MsbUJBQW1CekMsTUFBTUgsRUFBU1ksSUFFbEQ4QixFQUFlNUMsVUFBVW1CLE9BQVMsU0FBVUQsR0FDeENuQixLQUFLK0MsbUJBQW1CM0IsT0FBT0QsSUFFbkMwQixFQUFlZixTQUNYLGlCQUVHZSxJQUVYRixRQUFPQyxlQUFlakUsRUFBUyxjQUFnQmEsT0FBTyxJQUN0RGIsRUFBQUEsV0FBa0JrRSIsImZpbGUiOiJhbmd1bGFyLXBvd2VyYmkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBjb21wb25lbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0ZXhwb3J0cy5yZXBvcnREaXJlY3RpdmUgPSBjb21wb25lbnRfMS5kZWZhdWx0O1xyXG5cdHZhciBwb3dlcmJpXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xyXG5cdGV4cG9ydHMuc2VydmljZSA9IHBvd2VyYmlfMS5kZWZhdWx0O1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdwb3dlcmJpLmdsb2JhbCcsIFtdKVxyXG5cdCAgICAudmFsdWUoJ1Bvd2VyQmlHbG9iYWwnLCB3aW5kb3cuUG93ZXJiaSk7XHJcblx0YW5ndWxhci5tb2R1bGUoJ3Bvd2VyYmkuc2VydmljZScsIFtcclxuXHQgICAgJ3Bvd2VyYmkuZ2xvYmFsJ1xyXG5cdF0pXHJcblx0ICAgIC5zZXJ2aWNlKCdQb3dlckJpU2VydmljZScgLyogc2VydmljZS5uYW1lICovLCBwb3dlcmJpXzEuZGVmYXVsdCk7XHJcblx0YW5ndWxhci5tb2R1bGUoJ3Bvd2VyYmkuY29tcG9uZW50cy5wb3dlcmJpUmVwb3J0JywgW1xyXG5cdCAgICAncG93ZXJiaS5zZXJ2aWNlJ1xyXG5cdF0pXHJcblx0ICAgIC5kaXJlY3RpdmUoJ3Bvd2VyYmlSZXBvcnQnIC8qIHJlcG9ydERpcmVjdGl2ZS5uYW1lICovLCBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgY29tcG9uZW50XzEuZGVmYXVsdCgpOyB9KTtcclxuXHRhbmd1bGFyLm1vZHVsZSgncG93ZXJiaS5jb21wb25lbnRzJywgW1xyXG5cdCAgICAncG93ZXJiaS5jb21wb25lbnRzLnBvd2VyYmlSZXBvcnQnXHJcblx0XSk7XHJcblx0YW5ndWxhci5tb2R1bGUoJ3Bvd2VyYmknLCBbXHJcblx0ICAgICdwb3dlcmJpLnNlcnZpY2UnLFxyXG5cdCAgICAncG93ZXJiaS5jb21wb25lbnRzJ1xyXG5cdF0pO1xyXG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0LCBwb3dlckJpU2VydmljZSkge1xyXG5cdCAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcblx0ICAgICAgICB0aGlzLiR0aW1lb3V0ID0gJHRpbWVvdXQ7XHJcblx0ICAgICAgICB0aGlzLnBvd2VyQmlTZXJ2aWNlID0gcG93ZXJCaVNlcnZpY2U7XHJcblx0ICAgIH1cclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEhhbmRsZXIgYWZ0ZXIgY29tcG9uZW50IGlzIGluc2VydGVkIGluIHRoZSBET00uIElmIHJlcXVpcmVkIGF0dHJpYnV0ZXMgYXJlIHZhbGlkIGVtYmVkIGltbWVkaWF0ZWx5XHJcblx0ICAgICAqIG90aGVyd2lzZSwgd2F0Y2ggYXR0cmlidXRlcyBhbmQgZW1iZWQgd2hlbiB0aGV5IGFyZSB2YWxpZC5cclxuXHQgICAgICovXHJcblx0ICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlUmVxdWlyZWRBdHRyaWJ1dGVzKCkpIHtcclxuXHQgICAgICAgICAgICB0aGlzLmVtYmVkKGVsZW1lbnQpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgLy8gVE9ETzogTG9vayBmb3IgYW5vdGhlciB3YXkgdG8gZW5zdXJlIGJvdGggYXR0cmlidXRlcyBoYXZlIGNoYW5nZWQgYmVmb3JlIGNhbGxpbmcgdGhpcy5lbWJlZC5cclxuXHQgICAgICAgIC8vIEluIG1vc3QgY2FzZXMgZW1iZWRVcmwgYW5kIGFjY2Vzc1Rva2VuIHdpbGwgYmUgdXBkYXRlZCBhdCB0aGUgc2FtZSB0aW1lLCBidXQgdGhpcyB0YWtlcyB0d28gY3ljbGVzXHJcblx0ICAgICAgICAvLyBmb3IgdGhlIGNoYW5nZXMgdG8gcHJvcGVnYXRlIGZyb20gdGhlIHBhcmVudCAkc2NvcGUgdG8gdGhpcyAkc2NvcGUuXHJcblx0ICAgICAgICAvLyBwZXJoYXBzIHdlIGNhbiBqdXN0IHVzZSAkdGltZW91dCgpIGRpcmVjdGx5LiBcclxuXHQgICAgICAgIHZhciBkZWJvdW5jZWRFbWJlZCA9IHRoaXMuZGVib3VuY2UodGhpcy5lbWJlZC5iaW5kKHRoaXMpLCAxMDApO1xyXG5cdCAgICAgICAgdGhpcy4kc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmVtYmVkVXJsOyB9LCBmdW5jdGlvbiAoZW1iZWRVcmwsIG9sZEVtYmVkVXJsKSB7XHJcblx0ICAgICAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCBpbml0aWFsaXphdGlvblxyXG5cdCAgICAgICAgICAgIGlmIChlbWJlZFVybCA9PT0gb2xkRW1iZWRVcmwpIHtcclxuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBpZiAoX3RoaXMudmFsaWRhdGVSZXF1aXJlZEF0dHJpYnV0ZXMoKSkge1xyXG5cdCAgICAgICAgICAgICAgICBkZWJvdW5jZWRFbWJlZChlbGVtZW50KTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5hY2Nlc3NUb2tlbjsgfSwgZnVuY3Rpb24gKGFjY2Vzc1Rva2VuLCBvbGRBY2Nlc3NUb2tlbikge1xyXG5cdCAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3QgaW5pdGlhbGl6YXRpb25cclxuXHQgICAgICAgICAgICBpZiAoYWNjZXNzVG9rZW4gPT09IG9sZEFjY2Vzc1Rva2VuKSB7XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgaWYgKF90aGlzLnZhbGlkYXRlUmVxdWlyZWRBdHRyaWJ1dGVzKCkpIHtcclxuXHQgICAgICAgICAgICAgICAgZGVib3VuY2VkRW1iZWQoZWxlbWVudCk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBHaXZlbiBhbiBIVE1MRWxlbWVudCwgY29uc3RydWN0IGFuIGVtYmVkIGNvbmZpZ3VyYXRpb24gYmFzZWQgb24gYXR0cmlidXRlcyBhbmQgcGFzcyB0byBzZXJ2aWNlLlxyXG5cdCAgICAgKi9cclxuXHQgICAgQ29udHJvbGxlci5wcm90b3R5cGUuZW1iZWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG5cdCAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuXHQgICAgICAgICAgICB0eXBlOiAncmVwb3J0JyxcclxuXHQgICAgICAgICAgICBlbWJlZFVybDogdGhpcy5lbWJlZFVybCxcclxuXHQgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlblxyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGNvbmZpZywgdGhpcy5vcHRpb25zKTtcclxuXHQgICAgICAgIHRoaXMuY29tcG9uZW50ID0gdGhpcy5wb3dlckJpU2VydmljZS5lbWJlZChlbGVtZW50LCBjb25maWcpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogSGFuZGxlciB3aGVuIGNvbXBvbmVudCBpcyByZW1vdmVkIGZyb20gRE9NLiBGb3J3YXJkcyBjYWxsIHRvIHNlcnZpY2UgdG8gcGVyZm9ybSBjbGVhbnVwIG9mIHJlZmVyZW5jZXMgYmVmb3JlIERPTSBpcyBtb2RpZmllZC5cclxuXHQgICAgICovXHJcblx0ICAgIENvbnRyb2xsZXIucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuXHQgICAgICAgIHRoaXMucG93ZXJCaVNlcnZpY2UucmVtb3ZlKHRoaXMuY29tcG9uZW50KTtcclxuXHQgICAgfTtcclxuXHQgICAgQ29udHJvbGxlci5wcm90b3R5cGUuZGVib3VuY2UgPSBmdW5jdGlvbiAoZnVuYywgd2FpdCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHZhciBwcmV2aW91c1RpbWVvdXRQcm9taXNlO1xyXG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG5cdCAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcblx0ICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGlmIChwcmV2aW91c1RpbWVvdXRQcm9taXNlKSB7XHJcblx0ICAgICAgICAgICAgICAgIF90aGlzLiR0aW1lb3V0LmNhbmNlbChwcmV2aW91c1RpbWVvdXRQcm9taXNlKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgcHJldmlvdXNUaW1lb3V0UHJvbWlzZSA9IF90aGlzLiR0aW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmMuYXBwbHkodm9pZCAwLCBhcmdzKTsgfSwgd2FpdCk7XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRW5zdXJlIHJlcXVpcmVkIGF0dHJpYnV0ZXMgKGVtYmVkVXJsIGFuZCBhY2Nlc3NUb2tlbiBhcmUgdmFsaWQgYmVmb3JlIGF0dGVtcHRpbmcgdG8gZW1iZWQpXHJcblx0ICAgICAqL1xyXG5cdCAgICBDb250cm9sbGVyLnByb3RvdHlwZS52YWxpZGF0ZVJlcXVpcmVkQXR0cmlidXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHJldHVybiAodHlwZW9mIHRoaXMuZW1iZWRVcmwgPT09ICdzdHJpbmcnICYmIHRoaXMuZW1iZWRVcmwubGVuZ3RoID4gMClcclxuXHQgICAgICAgICAgICAmJiAodHlwZW9mIHRoaXMuYWNjZXNzVG9rZW4gPT09ICdzdHJpbmcnICYmIHRoaXMuYWNjZXNzVG9rZW4ubGVuZ3RoID4gMCk7XHJcblx0ICAgIH07XHJcblx0ICAgIENvbnRyb2xsZXIuJGluamVjdCA9IFtcclxuXHQgICAgICAgICckc2NvcGUnLFxyXG5cdCAgICAgICAgJyR0aW1lb3V0JyxcclxuXHQgICAgICAgICdQb3dlckJpU2VydmljZSdcclxuXHQgICAgXTtcclxuXHQgICAgcmV0dXJuIENvbnRyb2xsZXI7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLkNvbnRyb2xsZXIgPSBDb250cm9sbGVyO1xyXG5cdHZhciBEaXJlY3RpdmUgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBEaXJlY3RpdmUoKSB7XHJcblx0ICAgICAgICAvLyBzdGF0aWMgbmFtZSA9IFwicG93ZXJiaVJlcG9ydFwiO1xyXG5cdCAgICAgICAgdGhpcy5yZXN0cmljdCA9IFwiRVwiO1xyXG5cdCAgICAgICAgdGhpcy5yZXBsYWNlID0gdHJ1ZTtcclxuXHQgICAgICAgIHRoaXMudGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cInBvd2VyYmktZnJhbWVcIj48L2Rpdj4nO1xyXG5cdCAgICAgICAgdGhpcy5zY29wZSA9IHtcclxuXHQgICAgICAgICAgICBhY2Nlc3NUb2tlbjogXCI9XCIsXHJcblx0ICAgICAgICAgICAgZW1iZWRVcmw6IFwiPVwiLFxyXG5cdCAgICAgICAgICAgIG9wdGlvbnM6IFwiPT9cIlxyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHRoaXMuY29udHJvbGxlciA9IENvbnRyb2xsZXI7XHJcblx0ICAgICAgICB0aGlzLmJpbmRUb0NvbnRyb2xsZXIgPSB0cnVlO1xyXG5cdCAgICAgICAgdGhpcy5jb250cm9sbGVyQXMgPSBcInZtXCI7XHJcblx0ICAgIH1cclxuXHQgICAgRGlyZWN0aXZlLnByb3RvdHlwZS5saW5rID0gZnVuY3Rpb24gKCRzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgY29udHJvbGxlciwgdHJhbnNjbHVkZUZuKSB7XHJcblx0ICAgICAgICBjb250cm9sbGVyLmluaXQoZWxlbWVudFswXSk7XHJcblx0ICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICBjb250cm9sbGVyLnJlbW92ZShjb250cm9sbGVyLmNvbXBvbmVudCk7XHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIERpcmVjdGl2ZTtcclxuXHR9KCkpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHRleHBvcnRzLmRlZmF1bHQgPSBEaXJlY3RpdmU7XHJcblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIFBvd2VyQmlTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gUG93ZXJCaVNlcnZpY2UoUG93ZXJCaSkge1xyXG5cdCAgICAgICAgdGhpcy5wb3dlckJpQ29yZVNlcnZpY2UgPSBuZXcgUG93ZXJCaSgpO1xyXG5cdCAgICB9XHJcblx0ICAgIFBvd2VyQmlTZXJ2aWNlLnByb3RvdHlwZS5lbWJlZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcpIHtcclxuXHQgICAgICAgIHJldHVybiB0aGlzLnBvd2VyQmlDb3JlU2VydmljZS5lbWJlZChlbGVtZW50LCBjb25maWcpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBQb3dlckJpU2VydmljZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG5cdCAgICAgICAgdGhpcy5wb3dlckJpQ29yZVNlcnZpY2UucmVtb3ZlKGNvbXBvbmVudCk7XHJcblx0ICAgIH07XHJcblx0ICAgIFBvd2VyQmlTZXJ2aWNlLiRpbmplY3QgPSBbXHJcblx0ICAgICAgICAnUG93ZXJCaUdsb2JhbCdcclxuXHQgICAgXTtcclxuXHQgICAgcmV0dXJuIFBvd2VyQmlTZXJ2aWNlO1xyXG5cdH0oKSk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdGV4cG9ydHMuZGVmYXVsdCA9IFBvd2VyQmlTZXJ2aWNlO1xyXG5cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLXBvd2VyYmkuanMubWFwIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
