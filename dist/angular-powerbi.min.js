!function(e){function t(i){if(o[i])return o[i].exports;var r=o[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";var i=o(1);t.reportDirective=i["default"];var r=o(2),n=o(3);t.service=n["default"],angular.module("powerbi.global",[]).value("PowerBiGlobal",window.Powerbi),angular.module("powerbi.service",["powerbi.global"]).service("PowerBiService",n["default"]),angular.module("powerbi.components.powerbiReport",["powerbi.service"]).directive("powerbiReport",function(){return new i["default"]}),angular.module("powerbi.components.powerbiComponent",["powerbi.service"]).directive("powerbiComponent",function(){return new r["default"]}),angular.module("powerbi.components",["powerbi.components.powerbiReport","powerbi.components.powerbiComponent"]),angular.module("powerbi",["powerbi.service","powerbi.components"])},function(e,t){"use strict";var o=function(){function e(e,t,o){this.$scope=e,this.$timeout=t,this.powerBiService=o}return e.prototype.init=function(e){var t=this;this.validateRequiredAttributes()&&this.embed(e);var o=this.debounce(this.embed.bind(this),100);this.$scope.$watch(function(){return t.embedUrl},function(i,r){i!==r&&t.validateRequiredAttributes()&&o(e)}),this.$scope.$watch(function(){return t.accessToken},function(i,r){i!==r&&t.validateRequiredAttributes()&&o(e)})},e.prototype.embed=function(e){var t={type:"report",embedUrl:this.embedUrl,accessToken:this.accessToken};angular.extend(t,this.options),this.component=this.powerBiService.embed(e,t)},e.prototype.remove=function(e){this.powerBiService.remove(this.component)},e.prototype.debounce=function(e,t){var o,i=this;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];o&&i.$timeout.cancel(o),o=i.$timeout(function(){return e.apply(void 0,r)},t)}},e.prototype.validateRequiredAttributes=function(){return"string"==typeof this.embedUrl&&this.embedUrl.length>0&&"string"==typeof this.accessToken&&this.accessToken.length>0},e.$inject=["$scope","$timeout","PowerBiService"],e}();t.Controller=o;var i=function(){function e(){this.restrict="E",this.replace=!0,this.template='<div class="powerbi-frame"></div>',this.scope={accessToken:"=",embedUrl:"=",options:"=?"},this.controller=o,this.bindToController=!0,this.controllerAs="vm"}return e.prototype.link=function(e,t,o,i,r){i.init(t[0]),e.$on("$destroy",function(){i.remove(i.component)})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t){"use strict";var o=function(){function e(e,t){this.$scope=e,this.powerBiService=t,this.validationMap={report:this.validateReportOptions}}return e.prototype.init=function(e){var t=this;this.validateOptions(this.options)&&this.embed(e,this.options),this.$scope.$watch(function(){return t.options},function(o,i){o!==i&&t.validateOptions(t.options)&&t.embed(e,t.options)},!0)},e.prototype.embed=function(e,t){this.component=this.powerBiService.embed(e,t)},e.prototype.remove=function(e){this.powerBiService.remove(this.component)},e.prototype.validateOptions=function(e){return this.options&&"string"==typeof e.embedUrl&&e.embedUrl.length>0&&"string"==typeof e.accessToken&&e.accessToken.length>0&&this.validationMap.hasOwnProperty(e.type)&&"function"==typeof this.validationMap[e.type]?this.validationMap[e.type](e):!1},e.prototype.validateReportOptions=function(e){return!0},e.$inject=["$scope","PowerBiService"],e}();t.Controller=o;var i=function(){function e(){this.restrict="E",this.replace=!0,this.template='<div class="powerbi-frame"></div>',this.scope={accessToken:"=",embedUrl:"=",options:"=?"},this.controller=o,this.bindToController=!0,this.controllerAs="vm"}return e.prototype.link=function(e,t,o,i,r){i.init(t[0]),e.$on("$destroy",function(){i.remove(i.component)})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t){"use strict";var o=function(){function e(e){this.powerBiCoreService=new e}return e.prototype.embed=function(e,t){return this.powerBiCoreService.embed(e,t)},e.prototype.remove=function(e){this.powerBiCoreService.remove(e)},e.$inject=["PowerBiGlobal"],e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItcG93ZXJiaS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJjb21wb25lbnRfMSIsInJlcG9ydERpcmVjdGl2ZSIsImNvbXBvbmVudF8yIiwicG93ZXJiaV8xIiwic2VydmljZSIsImFuZ3VsYXIiLCJ2YWx1ZSIsIndpbmRvdyIsIlBvd2VyYmkiLCJkaXJlY3RpdmUiLCJDb250cm9sbGVyIiwiJHNjb3BlIiwiJHRpbWVvdXQiLCJwb3dlckJpU2VydmljZSIsInRoaXMiLCJwcm90b3R5cGUiLCJpbml0IiwiZWxlbWVudCIsIl90aGlzIiwidmFsaWRhdGVSZXF1aXJlZEF0dHJpYnV0ZXMiLCJlbWJlZCIsImRlYm91bmNlZEVtYmVkIiwiZGVib3VuY2UiLCJiaW5kIiwiJHdhdGNoIiwiZW1iZWRVcmwiLCJvbGRFbWJlZFVybCIsImFjY2Vzc1Rva2VuIiwib2xkQWNjZXNzVG9rZW4iLCJjb25maWciLCJ0eXBlIiwiZXh0ZW5kIiwib3B0aW9ucyIsImNvbXBvbmVudCIsInJlbW92ZSIsImZ1bmMiLCJ3YWl0IiwicHJldmlvdXNUaW1lb3V0UHJvbWlzZSIsImFyZ3MiLCJfaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsImNhbmNlbCIsImFwcGx5IiwiJGluamVjdCIsIkRpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVwbGFjZSIsInRlbXBsYXRlIiwic2NvcGUiLCJjb250cm9sbGVyIiwiYmluZFRvQ29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsImxpbmsiLCJhdHRyaWJ1dGVzIiwidHJhbnNjbHVkZUZuIiwiJG9uIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWxpZGF0aW9uTWFwIiwicmVwb3J0IiwidmFsaWRhdGVSZXBvcnRPcHRpb25zIiwidmFsaWRhdGVPcHRpb25zIiwib2xkT3B0aW9ucyIsImhhc093blByb3BlcnR5IiwiUG93ZXJCaVNlcnZpY2UiLCJQb3dlckJpIiwicG93ZXJCaUNvcmVTZXJ2aWNlIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQUtULFFBQVNDLEdBQW9CQyxHQUc1QixHQUFHQyxFQUFpQkQsR0FDbkIsTUFBT0MsR0FBaUJELEdBQVVFLE9BR25DLElBQUlDLEdBQVNGLEVBQWlCRCxJQUM3QkUsV0FDQUUsR0FBSUosRUFDSkssUUFBUSxFQVVULE9BTkFQLEdBQVFFLEdBQVVNLEtBQUtILEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNILEdBRy9ESSxFQUFPRSxRQUFTLEVBR1RGLEVBQU9ELFFBdkJmLEdBQUlELEtBcUNKLE9BVEFGLEdBQW9CUSxFQUFJVCxFQUd4QkMsRUFBb0JTLEVBQUlQLEVBR3hCRixFQUFvQlUsRUFBSSxHQUdqQlYsRUFBb0IsS0FLL0IsU0FBU0ksRUFBUUQsRUFBU0gsR0FFL0IsWUFDQSxJQUFJVyxHQUFjWCxFQUFvQixFQUN0Q0csR0FBUVMsZ0JBQWtCRCxFQUFBQSxVQUMxQixJQUFJRSxHQUFjYixFQUFvQixHQUNsQ2MsRUFBWWQsRUFBb0IsRUFDcENHLEdBQVFZLFFBQVVELEVBQUFBLFdBQ2xCRSxRQUFRWixPQUFPLHFCQUNWYSxNQUFNLGdCQUFpQkMsT0FBT0MsU0FDbkNILFFBQVFaLE9BQU8sbUJBQ1gsbUJBRUNXLFFBQVEsaUJBQXFDRCxFQUFBQSxZQUNsREUsUUFBUVosT0FBTyxvQ0FDWCxvQkFFQ2dCLFVBQVUsZ0JBQTRDLFdBQWMsTUFBTyxJQUFJVCxHQUFBQSxhQUNwRkssUUFBUVosT0FBTyx1Q0FDWCxvQkFFQ2dCLFVBQVUsbUJBQWtELFdBQWMsTUFBTyxJQUFJUCxHQUFBQSxhQUMxRkcsUUFBUVosT0FBTyxzQkFDWCxtQ0FDQSx3Q0FFSlksUUFBUVosT0FBTyxXQUNYLGtCQUNBLHdCQU1DLFNBQVNBLEVBQVFELEdBRXRCLFlBQ0EsSUFBSWtCLEdBQWMsV0FDZCxRQUFTQSxHQUFXQyxFQUFRQyxF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RzlCWSxJQUVYWSxRQUFPQyxlQUFlbEUsRUFBUyxjQUFnQmMsT0FBTyxJQUN0RGQsRUFBQUEsV0FBa0JxRCxHQUtiLFNBQVNwRCxFQUFRRCxHQUV0QixZQUNBLElBQUl5RSxHQUFrQixXQUNsQixRQUFTQSxHQUFlQyxHQUNwQnBELEtBQUtxRCxtQkFBcUIsR0FBSUQsR0FXbEMsTUFUQUQsR0FBZWxELFVBQVVLLE1BQVEsU0FBVUgsRUFBU1ksR0FDaEQsTUFBT2YsTUFBS3FELG1CQUFtQi9DLE1BQU1ILEVBQVNZLElBRWxEb0MsRUFBZWxELFVBQVVtQixPQUFTLFNBQVVELEdBQ3hDbkIsS0FBS3FELG1CQUFtQmpDLE9BQU9ELElBRW5DZ0MsRUFBZXJCLFNBQ1gsaUJBRUdxQixJQUVYUixRQUFPQyxlQUFlbEUsRUFBUyxjQUFnQmMsT0FBTyxJQUN0RGQsRUFBQUEsV0FBa0J5RSIsImZpbGUiOiJhbmd1bGFyLXBvd2VyYmkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBjb21wb25lbnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0ZXhwb3J0cy5yZXBvcnREaXJlY3RpdmUgPSBjb21wb25lbnRfMS5kZWZhdWx0O1xyXG5cdHZhciBjb21wb25lbnRfMiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIHBvd2VyYmlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XHJcblx0ZXhwb3J0cy5zZXJ2aWNlID0gcG93ZXJiaV8xLmRlZmF1bHQ7XHJcblx0YW5ndWxhci5tb2R1bGUoJ3Bvd2VyYmkuZ2xvYmFsJywgW10pXHJcblx0ICAgIC52YWx1ZSgnUG93ZXJCaUdsb2JhbCcsIHdpbmRvdy5Qb3dlcmJpKTtcclxuXHRhbmd1bGFyLm1vZHVsZSgncG93ZXJiaS5zZXJ2aWNlJywgW1xyXG5cdCAgICAncG93ZXJiaS5nbG9iYWwnXHJcblx0XSlcclxuXHQgICAgLnNlcnZpY2UoJ1Bvd2VyQmlTZXJ2aWNlJyAvKiBzZXJ2aWNlLm5hbWUgKi8sIHBvd2VyYmlfMS5kZWZhdWx0KTtcclxuXHRhbmd1bGFyLm1vZHVsZSgncG93ZXJiaS5jb21wb25lbnRzLnBvd2VyYmlSZXBvcnQnLCBbXHJcblx0ICAgICdwb3dlcmJpLnNlcnZpY2UnXHJcblx0XSlcclxuXHQgICAgLmRpcmVjdGl2ZSgncG93ZXJiaVJlcG9ydCcgLyogcmVwb3J0RGlyZWN0aXZlLm5hbWUgKi8sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBjb21wb25lbnRfMS5kZWZhdWx0KCk7IH0pO1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdwb3dlcmJpLmNvbXBvbmVudHMucG93ZXJiaUNvbXBvbmVudCcsIFtcclxuXHQgICAgJ3Bvd2VyYmkuc2VydmljZSdcclxuXHRdKVxyXG5cdCAgICAuZGlyZWN0aXZlKCdwb3dlcmJpQ29tcG9uZW50JyAvKiBjb21wb25lbnREaXJlY3RpdmUubmFtZSAqLywgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IGNvbXBvbmVudF8yLmRlZmF1bHQoKTsgfSk7XHJcblx0YW5ndWxhci5tb2R1bGUoJ3Bvd2VyYmkuY29tcG9uZW50cycsIFtcclxuXHQgICAgJ3Bvd2VyYmkuY29tcG9uZW50cy5wb3dlcmJpUmVwb3J0JyxcclxuXHQgICAgJ3Bvd2VyYmkuY29tcG9uZW50cy5wb3dlcmJpQ29tcG9uZW50J1xyXG5cdF0pO1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdwb3dlcmJpJywgW1xyXG5cdCAgICAncG93ZXJiaS5zZXJ2aWNlJyxcclxuXHQgICAgJ3Bvd2VyYmkuY29tcG9uZW50cydcclxuXHRdKTtcclxuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIENvbnRyb2xsZXIoJHNjb3BlLCAkdGltZW91dCwgcG93ZXJCaVNlcnZpY2UpIHtcclxuXHQgICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG5cdCAgICAgICAgdGhpcy4kdGltZW91dCA9ICR0aW1lb3V0O1xyXG5cdCAgICAgICAgdGhpcy5wb3dlckJpU2VydmljZSA9IHBvd2VyQmlTZXJ2aWNlO1xyXG5cdCAgICB9XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBIYW5kbGVyIGFmdGVyIGNvbXBvbmVudCBpcyBpbnNlcnRlZCBpbiB0aGUgRE9NLiBJZiByZXF1aXJlZCBhdHRyaWJ1dGVzIGFyZSB2YWxpZCBlbWJlZCBpbW1lZGlhdGVseVxyXG5cdCAgICAgKiBvdGhlcndpc2UsIHdhdGNoIGF0dHJpYnV0ZXMgYW5kIGVtYmVkIHdoZW4gdGhleSBhcmUgdmFsaWQuXHJcblx0ICAgICAqL1xyXG5cdCAgICBDb250cm9sbGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICBpZiAodGhpcy52YWxpZGF0ZVJlcXVpcmVkQXR0cmlidXRlcygpKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5lbWJlZChlbGVtZW50KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIC8vIFRPRE86IExvb2sgZm9yIGFub3RoZXIgd2F5IHRvIGVuc3VyZSBib3RoIGF0dHJpYnV0ZXMgaGF2ZSBjaGFuZ2VkIGJlZm9yZSBjYWxsaW5nIHRoaXMuZW1iZWQuXHJcblx0ICAgICAgICAvLyBJbiBtb3N0IGNhc2VzIGVtYmVkVXJsIGFuZCBhY2Nlc3NUb2tlbiB3aWxsIGJlIHVwZGF0ZWQgYXQgdGhlIHNhbWUgdGltZSwgYnV0IHRoaXMgdGFrZXMgdHdvIGN5Y2xlc1xyXG5cdCAgICAgICAgLy8gZm9yIHRoZSBjaGFuZ2VzIHRvIHByb3BlZ2F0ZSBmcm9tIHRoZSBwYXJlbnQgJHNjb3BlIHRvIHRoaXMgJHNjb3BlLlxyXG5cdCAgICAgICAgLy8gcGVyaGFwcyB3ZSBjYW4ganVzdCB1c2UgJHRpbWVvdXQoKSBkaXJlY3RseS4gXHJcblx0ICAgICAgICB2YXIgZGVib3VuY2VkRW1iZWQgPSB0aGlzLmRlYm91bmNlKHRoaXMuZW1iZWQuYmluZCh0aGlzKSwgMTAwKTtcclxuXHQgICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5lbWJlZFVybDsgfSwgZnVuY3Rpb24gKGVtYmVkVXJsLCBvbGRFbWJlZFVybCkge1xyXG5cdCAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3QgaW5pdGlhbGl6YXRpb25cclxuXHQgICAgICAgICAgICBpZiAoZW1iZWRVcmwgPT09IG9sZEVtYmVkVXJsKSB7XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgaWYgKF90aGlzLnZhbGlkYXRlUmVxdWlyZWRBdHRyaWJ1dGVzKCkpIHtcclxuXHQgICAgICAgICAgICAgICAgZGVib3VuY2VkRW1iZWQoZWxlbWVudCk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgICAgICB0aGlzLiRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuYWNjZXNzVG9rZW47IH0sIGZ1bmN0aW9uIChhY2Nlc3NUb2tlbiwgb2xkQWNjZXNzVG9rZW4pIHtcclxuXHQgICAgICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGluaXRpYWxpemF0aW9uXHJcblx0ICAgICAgICAgICAgaWYgKGFjY2Vzc1Rva2VuID09PSBvbGRBY2Nlc3NUb2tlbikge1xyXG5cdCAgICAgICAgICAgICAgICByZXR1cm47XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGlmIChfdGhpcy52YWxpZGF0ZVJlcXVpcmVkQXR0cmlidXRlcygpKSB7XHJcblx0ICAgICAgICAgICAgICAgIGRlYm91bmNlZEVtYmVkKGVsZW1lbnQpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH0pO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogR2l2ZW4gYW4gSFRNTEVsZW1lbnQsIGNvbnN0cnVjdCBhbiBlbWJlZCBjb25maWd1cmF0aW9uIGJhc2VkIG9uIGF0dHJpYnV0ZXMgYW5kIHBhc3MgdG8gc2VydmljZS5cclxuXHQgICAgICovXHJcblx0ICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmVtYmVkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuXHQgICAgICAgIHZhciBjb25maWcgPSB7XHJcblx0ICAgICAgICAgICAgdHlwZTogJ3JlcG9ydCcsXHJcblx0ICAgICAgICAgICAgZW1iZWRVcmw6IHRoaXMuZW1iZWRVcmwsXHJcblx0ICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW5cclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICBhbmd1bGFyLmV4dGVuZChjb25maWcsIHRoaXMub3B0aW9ucyk7XHJcblx0ICAgICAgICB0aGlzLmNvbXBvbmVudCA9IHRoaXMucG93ZXJCaVNlcnZpY2UuZW1iZWQoZWxlbWVudCwgY29uZmlnKTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEhhbmRsZXIgd2hlbiBjb21wb25lbnQgaXMgcmVtb3ZlZCBmcm9tIERPTS4gRm9yd2FyZHMgY2FsbCB0byBzZXJ2aWNlIHRvIHBlcmZvcm0gY2xlYW51cCBvZiByZWZlcmVuY2VzIGJlZm9yZSBET00gaXMgbW9kaWZpZWQuXHJcblx0ICAgICAqL1xyXG5cdCAgICBDb250cm9sbGVyLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcblx0ICAgICAgICB0aGlzLnBvd2VyQmlTZXJ2aWNlLnJlbW92ZSh0aGlzLmNvbXBvbmVudCk7XHJcblx0ICAgIH07XHJcblx0ICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmRlYm91bmNlID0gZnVuY3Rpb24gKGZ1bmMsIHdhaXQpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICB2YXIgcHJldmlvdXNUaW1lb3V0UHJvbWlzZTtcclxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG5cdCAgICAgICAgICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBpZiAocHJldmlvdXNUaW1lb3V0UHJvbWlzZSkge1xyXG5cdCAgICAgICAgICAgICAgICBfdGhpcy4kdGltZW91dC5jYW5jZWwocHJldmlvdXNUaW1lb3V0UHJvbWlzZSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIHByZXZpb3VzVGltZW91dFByb21pc2UgPSBfdGhpcy4kdGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jLmFwcGx5KHZvaWQgMCwgYXJncyk7IH0sIHdhaXQpO1xyXG5cdCAgICAgICAgfTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEVuc3VyZSByZXF1aXJlZCBhdHRyaWJ1dGVzIChlbWJlZFVybCBhbmQgYWNjZXNzVG9rZW4gYXJlIHZhbGlkIGJlZm9yZSBhdHRlbXB0aW5nIHRvIGVtYmVkKVxyXG5cdCAgICAgKi9cclxuXHQgICAgQ29udHJvbGxlci5wcm90b3R5cGUudmFsaWRhdGVSZXF1aXJlZEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICByZXR1cm4gKHR5cGVvZiB0aGlzLmVtYmVkVXJsID09PSAnc3RyaW5nJyAmJiB0aGlzLmVtYmVkVXJsLmxlbmd0aCA+IDApXHJcblx0ICAgICAgICAgICAgJiYgKHR5cGVvZiB0aGlzLmFjY2Vzc1Rva2VuID09PSAnc3RyaW5nJyAmJiB0aGlzLmFjY2Vzc1Rva2VuLmxlbmd0aCA+IDApO1xyXG5cdCAgICB9O1xyXG5cdCAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXHJcblx0ICAgICAgICAnJHNjb3BlJyxcclxuXHQgICAgICAgICckdGltZW91dCcsXHJcblx0ICAgICAgICAnUG93ZXJCaVNlcnZpY2UnXHJcblx0ICAgIF07XHJcblx0ICAgIHJldHVybiBDb250cm9sbGVyO1xyXG5cdH0oKSk7XHJcblx0ZXhwb3J0cy5Db250cm9sbGVyID0gQ29udHJvbGxlcjtcclxuXHR2YXIgRGlyZWN0aXZlID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gRGlyZWN0aXZlKCkge1xyXG5cdCAgICAgICAgLy8gc3RhdGljIG5hbWUgPSBcInBvd2VyYmlSZXBvcnRcIjtcclxuXHQgICAgICAgIHRoaXMucmVzdHJpY3QgPSBcIkVcIjtcclxuXHQgICAgICAgIHRoaXMucmVwbGFjZSA9IHRydWU7XHJcblx0ICAgICAgICB0aGlzLnRlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJwb3dlcmJpLWZyYW1lXCI+PC9kaXY+JztcclxuXHQgICAgICAgIHRoaXMuc2NvcGUgPSB7XHJcblx0ICAgICAgICAgICAgYWNjZXNzVG9rZW46IFwiPVwiLFxyXG5cdCAgICAgICAgICAgIGVtYmVkVXJsOiBcIj1cIixcclxuXHQgICAgICAgICAgICBvcHRpb25zOiBcIj0/XCJcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBDb250cm9sbGVyO1xyXG5cdCAgICAgICAgdGhpcy5iaW5kVG9Db250cm9sbGVyID0gdHJ1ZTtcclxuXHQgICAgICAgIHRoaXMuY29udHJvbGxlckFzID0gXCJ2bVwiO1xyXG5cdCAgICB9XHJcblx0ICAgIERpcmVjdGl2ZS5wcm90b3R5cGUubGluayA9IGZ1bmN0aW9uICgkc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMsIGNvbnRyb2xsZXIsIHRyYW5zY2x1ZGVGbikge1xyXG5cdCAgICAgICAgY29udHJvbGxlci5pbml0KGVsZW1lbnRbMF0pO1xyXG5cdCAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgY29udHJvbGxlci5yZW1vdmUoY29udHJvbGxlci5jb21wb25lbnQpO1xyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBEaXJlY3RpdmU7XHJcblx0fSgpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRGlyZWN0aXZlO1xyXG5cblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gQ29udHJvbGxlcigkc2NvcGUsIHBvd2VyQmlTZXJ2aWNlKSB7XHJcblx0ICAgICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcclxuXHQgICAgICAgIHRoaXMucG93ZXJCaVNlcnZpY2UgPSBwb3dlckJpU2VydmljZTtcclxuXHQgICAgICAgIHRoaXMudmFsaWRhdGlvbk1hcCA9IHtcclxuXHQgICAgICAgICAgICAncmVwb3J0JzogdGhpcy52YWxpZGF0ZVJlcG9ydE9wdGlvbnNcclxuXHQgICAgICAgIH07XHJcblx0ICAgIH1cclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEhhbmRsZXIgYWZ0ZXIgY29tcG9uZW50IGlzIGluc2VydGVkIGluIHRoZSBET00uIElmIHJlcXVpcmVkIGF0dHJpYnV0ZXMgYXJlIHZhbGlkIGVtYmVkIGltbWVkaWF0ZWx5XHJcblx0ICAgICAqIG90aGVyd2lzZSwgd2F0Y2ggYXR0cmlidXRlcyBhbmQgZW1iZWQgd2hlbiB0aGV5IGFyZSB2YWxpZC5cclxuXHQgICAgICovXHJcblx0ICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlT3B0aW9ucyh0aGlzLm9wdGlvbnMpKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5lbWJlZChlbGVtZW50LCB0aGlzLm9wdGlvbnMpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdGhpcy4kc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm9wdGlvbnM7IH0sIGZ1bmN0aW9uIChvcHRpb25zLCBvbGRPcHRpb25zKSB7XHJcblx0ICAgICAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCBpbml0aWFsaXphdGlvblxyXG5cdCAgICAgICAgICAgIGlmIChvcHRpb25zID09PSBvbGRPcHRpb25zKSB7XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgaWYgKF90aGlzLnZhbGlkYXRlT3B0aW9ucyhfdGhpcy5vcHRpb25zKSkge1xyXG5cdCAgICAgICAgICAgICAgICBfdGhpcy5lbWJlZChlbGVtZW50LCBfdGhpcy5vcHRpb25zKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9LCB0cnVlKTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEdpdmVuIGFuIEhUTUxFbGVtZW50LCBjb25zdHJ1Y3QgYW4gZW1iZWQgY29uZmlndXJhdGlvbiBiYXNlZCBvbiBhdHRyaWJ1dGVzIGFuZCBwYXNzIHRvIHNlcnZpY2UuXHJcblx0ICAgICAqL1xyXG5cdCAgICBDb250cm9sbGVyLnByb3RvdHlwZS5lbWJlZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XHJcblx0ICAgICAgICB0aGlzLmNvbXBvbmVudCA9IHRoaXMucG93ZXJCaVNlcnZpY2UuZW1iZWQoZWxlbWVudCwgb3B0aW9ucyk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBIYW5kbGVyIHdoZW4gY29tcG9uZW50IGlzIHJlbW92ZWQgZnJvbSBET00uIEZvcndhcmRzIGNhbGwgdG8gc2VydmljZSB0byBwZXJmb3JtIGNsZWFudXAgb2YgcmVmZXJlbmNlcyBiZWZvcmUgRE9NIGlzIG1vZGlmaWVkLlxyXG5cdCAgICAgKi9cclxuXHQgICAgQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG5cdCAgICAgICAgdGhpcy5wb3dlckJpU2VydmljZS5yZW1vdmUodGhpcy5jb21wb25lbnQpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRW5zdXJlIHJlcXVpcmVkIG9wdGlvbnMgKGVtYmVkVXJsIGFuZCBhY2Nlc3NUb2tlbiBhcmUgdmFsaWQgYmVmb3JlIGF0dGVtcHRpbmcgdG8gZW1iZWQpXHJcblx0ICAgICAqL1xyXG5cdCAgICBDb250cm9sbGVyLnByb3RvdHlwZS52YWxpZGF0ZU9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG5cdCAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnNcclxuXHQgICAgICAgICAgICB8fCAhKHR5cGVvZiBvcHRpb25zLmVtYmVkVXJsID09PSAnc3RyaW5nJyAmJiBvcHRpb25zLmVtYmVkVXJsLmxlbmd0aCA+IDApXHJcblx0ICAgICAgICAgICAgfHwgISh0eXBlb2Ygb3B0aW9ucy5hY2Nlc3NUb2tlbiA9PT0gJ3N0cmluZycgJiYgb3B0aW9ucy5hY2Nlc3NUb2tlbi5sZW5ndGggPiAwKSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGlmICh0aGlzLnZhbGlkYXRpb25NYXAuaGFzT3duUHJvcGVydHkob3B0aW9ucy50eXBlKSAmJiB0eXBlb2YgdGhpcy52YWxpZGF0aW9uTWFwW29wdGlvbnMudHlwZV0gPT09IFwiZnVuY3Rpb25cIikge1xyXG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRpb25NYXBbb3B0aW9ucy50eXBlXShvcHRpb25zKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgQ29udHJvbGxlci5wcm90b3R5cGUudmFsaWRhdGVSZXBvcnRPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHQgICAgICAgIHJldHVybiB0cnVlO1xyXG5cdCAgICB9O1xyXG5cdCAgICBDb250cm9sbGVyLiRpbmplY3QgPSBbXHJcblx0ICAgICAgICAnJHNjb3BlJyxcclxuXHQgICAgICAgICdQb3dlckJpU2VydmljZSdcclxuXHQgICAgXTtcclxuXHQgICAgcmV0dXJuIENvbnRyb2xsZXI7XHJcblx0fSgpKTtcclxuXHRleHBvcnRzLkNvbnRyb2xsZXIgPSBDb250cm9sbGVyO1xyXG5cdHZhciBEaXJlY3RpdmUgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBEaXJlY3RpdmUoKSB7XHJcblx0ICAgICAgICAvLyBzdGF0aWMgbmFtZSA9IFwicG93ZXJiaUNvbXBvbmVudFwiO1xyXG5cdCAgICAgICAgdGhpcy5yZXN0cmljdCA9IFwiRVwiO1xyXG5cdCAgICAgICAgdGhpcy5yZXBsYWNlID0gdHJ1ZTtcclxuXHQgICAgICAgIHRoaXMudGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cInBvd2VyYmktZnJhbWVcIj48L2Rpdj4nO1xyXG5cdCAgICAgICAgdGhpcy5zY29wZSA9IHtcclxuXHQgICAgICAgICAgICBhY2Nlc3NUb2tlbjogXCI9XCIsXHJcblx0ICAgICAgICAgICAgZW1iZWRVcmw6IFwiPVwiLFxyXG5cdCAgICAgICAgICAgIG9wdGlvbnM6IFwiPT9cIlxyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIHRoaXMuY29udHJvbGxlciA9IENvbnRyb2xsZXI7XHJcblx0ICAgICAgICB0aGlzLmJpbmRUb0NvbnRyb2xsZXIgPSB0cnVlO1xyXG5cdCAgICAgICAgdGhpcy5jb250cm9sbGVyQXMgPSBcInZtXCI7XHJcblx0ICAgIH1cclxuXHQgICAgRGlyZWN0aXZlLnByb3RvdHlwZS5saW5rID0gZnVuY3Rpb24gKCRzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgY29udHJvbGxlciwgdHJhbnNjbHVkZUZuKSB7XHJcblx0ICAgICAgICBjb250cm9sbGVyLmluaXQoZWxlbWVudFswXSk7XHJcblx0ICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICBjb250cm9sbGVyLnJlbW92ZShjb250cm9sbGVyLmNvbXBvbmVudCk7XHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIERpcmVjdGl2ZTtcclxuXHR9KCkpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHRleHBvcnRzLmRlZmF1bHQgPSBEaXJlY3RpdmU7XHJcblxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIFBvd2VyQmlTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gUG93ZXJCaVNlcnZpY2UoUG93ZXJCaSkge1xyXG5cdCAgICAgICAgdGhpcy5wb3dlckJpQ29yZVNlcnZpY2UgPSBuZXcgUG93ZXJCaSgpO1xyXG5cdCAgICB9XHJcblx0ICAgIFBvd2VyQmlTZXJ2aWNlLnByb3RvdHlwZS5lbWJlZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcpIHtcclxuXHQgICAgICAgIHJldHVybiB0aGlzLnBvd2VyQmlDb3JlU2VydmljZS5lbWJlZChlbGVtZW50LCBjb25maWcpO1xyXG5cdCAgICB9O1xyXG5cdCAgICBQb3dlckJpU2VydmljZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG5cdCAgICAgICAgdGhpcy5wb3dlckJpQ29yZVNlcnZpY2UucmVtb3ZlKGNvbXBvbmVudCk7XHJcblx0ICAgIH07XHJcblx0ICAgIFBvd2VyQmlTZXJ2aWNlLiRpbmplY3QgPSBbXHJcblx0ICAgICAgICAnUG93ZXJCaUdsb2JhbCdcclxuXHQgICAgXTtcclxuXHQgICAgcmV0dXJuIFBvd2VyQmlTZXJ2aWNlO1xyXG5cdH0oKSk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdGV4cG9ydHMuZGVmYXVsdCA9IFBvd2VyQmlTZXJ2aWNlO1xyXG5cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLXBvd2VyYmkuanMubWFwIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
