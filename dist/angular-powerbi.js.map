{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 111c703e96d68241e9ee","webpack:///./src/angular-powerbi.ts","webpack:///./src/components/powerbi-report/component.ts","webpack:///./src/components/powerbi-component/component.ts","webpack:///./src/services/powerbi.ts","webpack:///external \"angular\""],"names":[],"mappings":"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","file":"angular-powerbi.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"angular\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"angular\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"angular-powerbi\"] = factory(require(\"angular\"));\n\telse\n\t\troot[\"angular-powerbi\"] = factory(root[\"angular\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 111c703e96d68241e9ee\n **/","import reportDirective from './components/powerbi-report/component';\r\nimport componentDirective from './components/powerbi-component/component';\r\nimport service from './services/powerbi';\r\nimport * as pbi from 'powerbi-client';\r\nimport * as angular from 'angular';\r\n\r\nexport const components = {\r\n    report: reportDirective,\r\n    component: componentDirective\r\n}\r\n\r\nexport {\r\n    service\r\n}\r\n\r\nangular.module('powerbi.global', [])\r\n    .value('PowerBiGlobal', window.powerbi)\r\n    ;\r\n\r\nangular.module('powerbi.service', [\r\n    'powerbi.global'\r\n])\r\n    .service('PowerBiService' /* service.name */, service)\r\n    ;\r\n\r\nangular.module('powerbi.components.powerbiReport', [\r\n    'powerbi.service'\r\n])\r\n    // Attempt to use name from class, but there is error in Phantom\r\n    // 'TypeError: Attempted to assign to readonly property.'\r\n    .directive('powerbiReport' /* reportDirective.name */, () => new reportDirective())\r\n    ;\r\n    \r\nangular.module('powerbi.components.powerbiComponent', [\r\n    'powerbi.service'\r\n])\r\n    .directive('powerbiComponent' /* componentDirective.name */, () => new componentDirective())\r\n    ;\r\n\r\nangular.module('powerbi.components', [\r\n    'powerbi.components.powerbiReport',\r\n    'powerbi.components.powerbiComponent'\r\n]); \r\n\r\nangular.module('powerbi', [\r\n    'powerbi.service',\r\n    'powerbi.components'\r\n]);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/angular-powerbi.ts\n **/","import * as pbi from 'powerbi-client';\r\nimport * as models from 'powerbi-models';\r\nimport PowerBiService from '../../services/powerbi';\r\n\r\nexport class Controller {\r\n    accessToken: string;\r\n    component: pbi.Embed;\r\n    embedUrl: string;\r\n    reportId: string;\r\n    name: string;\r\n    onEmbedded: Function;\r\n    options: models.ISettings;\r\n    private powerBiService: PowerBiService;\r\n    private $scope: ng.IScope;\r\n    private $timeout: ng.ITimeoutService;\r\n    \r\n    static $inject = [\r\n        '$scope',\r\n        '$timeout',\r\n        'PowerBiService'\r\n    ]\r\n    \r\n    constructor($scope: ng.IScope, $timeout: ng.ITimeoutService, powerBiService: PowerBiService) {\r\n        this.$scope = $scope;\r\n        this.$timeout = $timeout;\r\n        this.powerBiService = powerBiService;\r\n    }\r\n    \r\n    /**\r\n     * Handler after component is inserted in the DOM. If required attributes are valid embed immediately\r\n     * otherwise, watch attributes and embed when they are valid. \r\n     */\r\n    init(element: HTMLElement) {\r\n        if(this.validateRequiredAttributes()) {\r\n            this.embed(element);\r\n        }\r\n        \r\n        // TODO: Look for another way to ensure both attributes have changed before calling this.embed.\r\n        // In most cases embedUrl and accessToken will be updated at the same time, but this takes two cycles\r\n        // for the changes to propegate from the parent $scope to this $scope.\r\n        // perhaps we can just use $timeout() directly. \r\n        const debouncedEmbed = this.debounce(() => {\r\n            if(this.validateRequiredAttributes()) {\r\n                this.embed(element);\r\n            }\r\n            else if(this.component) {\r\n                this.reset(element);\r\n            }\r\n        }, 100);\r\n        \r\n        this.$scope.$watch(() => this.embedUrl, (embedUrl, oldEmbedUrl) => {\r\n            // Guard against initialization\r\n            if(embedUrl === oldEmbedUrl) {\r\n                return;\r\n            }\r\n            \r\n            debouncedEmbed(element);\r\n        });\r\n        \r\n        this.$scope.$watch(() => this.accessToken, (accessToken, oldAccessToken) => {\r\n            // Guard against initialization\r\n            if(accessToken === oldAccessToken) {\r\n                return;\r\n            }\r\n            \r\n            debouncedEmbed(element);\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Given an HTMLElement, construct an embed configuration based on attributes and pass to service.\r\n     */\r\n    private embed(element: HTMLElement) {\r\n        const config: pbi.IEmbedConfiguration = {\r\n            type: 'report',\r\n            embedUrl: this.embedUrl,\r\n            accessToken: this.accessToken,\r\n            id: this.reportId,\r\n            uniqueId: this.name\r\n        };\r\n        \r\n        angular.extend(config, this.options);\r\n        \r\n        this.component = this.powerBiService.embed(element, config);\r\n        this.onEmbedded({ $embed: this.component });\r\n    }\r\n    \r\n    /**\r\n     * Handler when component is removed from DOM. Forwards call to service to perform cleanup of references before DOM is modified.\r\n     */\r\n    reset(element: HTMLElement) {\r\n        this.powerBiService.reset(element);\r\n        this.component = null;\r\n    }\r\n    \r\n    private debounce(func: Function, wait: number): Function {\r\n        let previousTimeoutPromise: any;\r\n        \r\n        return (...args: any[]) => {\r\n            if(previousTimeoutPromise) {\r\n                this.$timeout.cancel(previousTimeoutPromise);\r\n            }\r\n            \r\n            previousTimeoutPromise = this.$timeout(() => func(...args), wait);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Ensure required attributes (embedUrl and accessToken are valid before attempting to embed) \r\n     */\r\n    private validateRequiredAttributes() {\r\n        return (typeof this.embedUrl === 'string' && this.embedUrl.length > 0)\r\n            && (typeof this.accessToken === 'string' && this.accessToken.length > 0);\r\n    }\r\n}\r\n\r\nexport default class Directive {\r\n    // static name = \"powerbiReport\";\r\n    restrict = \"E\";\r\n    replace = true;\r\n    template = '<div class=\"powerbi-frame\"></div>';\r\n    scope = {\r\n        accessToken: \"=\",\r\n        embedUrl: \"=\",\r\n        reportId: \"=?\",\r\n        name: \"=?\",\r\n        options: \"=?\",\r\n        onEmbedded: \"&\"\r\n    };\r\n    controller = Controller;\r\n    bindToController = true;\r\n    controllerAs = \"vm\";\r\n    \r\n    link($scope: ng.IScope, element: ng.IAugmentedJQuery, attributes: any, controller: Controller, transcludeFn: any) {\r\n        controller.init(element[0]);\r\n        \r\n        $scope.$on('$destroy', () => {\r\n            controller.reset(element[0]);\r\n        });\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/powerbi-report/component.ts\n **/","import * as pbi from 'powerbi-client';\r\nimport PowerBiService from '../../services/powerbi';\r\n\r\nexport class Controller {\r\n    component: pbi.Embed;\r\n    options: pbi.IEmbedConfiguration;\r\n    onEmbedded: Function;\r\n    validationMap: any;\r\n    private powerBiService: PowerBiService;\r\n    private $scope: ng.IScope;\r\n    \r\n    static $inject = [\r\n        '$scope',\r\n        'PowerBiService'\r\n    ]\r\n    \r\n    constructor($scope: ng.IScope, powerBiService: PowerBiService) {\r\n        this.$scope = $scope;\r\n        this.powerBiService = powerBiService;\r\n        \r\n        this.validationMap = {\r\n            'report': this.validateReportOptions\r\n        };\r\n    }\r\n    \r\n    /**\r\n     * Handler after component is inserted in the DOM. If required attributes are valid embed immediately\r\n     * otherwise, watch attributes and embed when they are valid. \r\n     */\r\n    init(element: HTMLElement) {\r\n        if(this.validateOptions(this.options)) {\r\n            this.embed(element, this.options);\r\n        }\r\n\r\n        this.$scope.$watch(() => this.options, (options, oldOptions) => {\r\n            // Guard against initialization\r\n            if(options === oldOptions) {\r\n                return;\r\n            }\r\n            \r\n            if(this.validateOptions(this.options)) {\r\n                this.embed(element, this.options);\r\n            }\r\n            else if (this.component) {\r\n                this.reset(element);\r\n            }\r\n        }, true);\r\n    }\r\n    \r\n    /**\r\n     * Given an HTMLElement, construct an embed configuration based on attributes and pass to service.\r\n     */\r\n    private embed(element: HTMLElement, options: pbi.IEmbedConfiguration) {\r\n        this.component = this.powerBiService.embed(element, options);\r\n        this.onEmbedded({ $embed: this.component });\r\n    }\r\n    \r\n    /**\r\n     * Handler when component is removed from DOM. Forwards call to service to perform cleanup of references before DOM is modified.\r\n     */\r\n    reset(element: HTMLElement) {\r\n        this.powerBiService.reset(element);\r\n        this.component = null;\r\n    }\r\n    \r\n    /**\r\n     * Ensure required options (embedUrl and accessToken are valid before attempting to embed) \r\n     */\r\n    private validateOptions(options: pbi.IEmbedConfiguration) {\r\n        if (!this.options\r\n            || !(typeof options.embedUrl === 'string' && options.embedUrl.length > 0)\r\n            || !(typeof options.accessToken === 'string' && options.accessToken.length > 0)\r\n        ) {\r\n            return false;\r\n        }\r\n        \r\n        if(this.validationMap.hasOwnProperty(options.type) && typeof this.validationMap[options.type] === \"function\") {\r\n            return this.validationMap[options.type](options);\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    private validateReportOptions(options: pbi.IEmbedConfiguration) {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport default class Directive {\r\n    // static name = \"powerbiComponent\";\r\n    restrict = \"E\";\r\n    replace = true;\r\n    template = '<div class=\"powerbi-frame\"></div>';\r\n    scope = {\r\n        accessToken: \"=\",\r\n        embedUrl: \"=\",\r\n        options: \"=?\",\r\n        onEmbedded: \"&\"\r\n    };\r\n    controller = Controller;\r\n    bindToController = true;\r\n    controllerAs = \"vm\";\r\n    \r\n    link($scope: ng.IScope, element: ng.IAugmentedJQuery, attributes: any, controller: Controller, transcludeFn: any) {\r\n        controller.init(element[0]);\r\n        \r\n        $scope.$on('$destroy', () => {\r\n            controller.reset(element[0]);\r\n        });\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/powerbi-component/component.ts\n **/","import * as pbi from 'powerbi-client';\r\n\r\nexport default class PowerBiService {\r\n    // static name = \"PowerBiService\";\r\n    private powerBiCoreService: pbi.service.Service;\r\n    \r\n    static $inject = [\r\n        'PowerBiGlobal'\r\n    ];\r\n    \r\n    constructor(powerbi: pbi.service.Service) {\r\n        this.powerBiCoreService = powerbi;\r\n    }\r\n    \r\n    embed(element: HTMLElement, config: pbi.IEmbedConfiguration): pbi.Embed {\r\n        return this.powerBiCoreService.embed(element, config);\r\n    }\r\n\r\n    get(element: HTMLElement): pbi.Embed {\r\n        return this.powerBiCoreService.get(element);\r\n    }\r\n\r\n    find(uniqueId: string): pbi.Report | pbi.Tile {\r\n        return this.powerBiCoreService.find(uniqueId);\r\n    }\r\n    \r\n    reset(element: HTMLElement): void {\r\n        this.powerBiCoreService.reset(element);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/services/powerbi.ts\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"angular\"\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}