{"version":3,"sources":["webpack:///webpack/bootstrap fbe8553a3d97155a94cc","webpack:///./src/angular-powerbi.ts","webpack:///./src/components/powerbi-report/component.ts","webpack:///./src/services/powerbi.ts"],"names":[],"mappings":"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","file":"angular-powerbi.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fbe8553a3d97155a94cc\n **/","import reportDirective from './components/powerbi-report/component';\r\nimport service from './services/powerbi';\r\n\r\nexport {\r\n    reportDirective,\r\n    service\r\n}\r\n\r\nangular.module('powerbi.service', [])\r\n    .service('PowerBiService' /* service.name */, service)\r\n    ;\r\n\r\nangular.module('powerbi.components.powerbiReport', [\r\n    'powerbi.service'\r\n])\r\n    // Attempt to use name from class, but there is error in Phantom\r\n    // 'TypeError: Attempted to assign to readonly property.'\r\n    .directive('powerbiReport' /* reportDirective.name */, () => new reportDirective())\r\n    ;\r\n\r\nangular.module('powerbi.components', [\r\n    'powerbi.components.powerbiReport'\r\n]);\r\n\r\nangular.module('powerbi', [\r\n    'powerbi.service',\r\n    'powerbi.components'\r\n]);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/angular-powerbi.ts\n **/","import * as pbi from 'powerbi-client';\r\nimport PowerBiService from '../../services/powerbi';\r\n\r\nexport class Controller {\r\n    accessToken: string;\r\n    async: boolean;\r\n    component: pbi.Embed;\r\n    embedUrl: string;\r\n    filter: string;\r\n    filterPaneEnabled: boolean;\r\n    powerBiService: PowerBiService;\r\n    $scope: ng.IScope;\r\n    $timeout: ng.ITimeoutService;\r\n    \r\n    static $inject = [\r\n        '$scope',\r\n        '$timeout',\r\n        'PowerBiService'\r\n    ]\r\n    \r\n    constructor($scope: ng.IScope, $timeout: ng.ITimeoutService, powerBiService: PowerBiService) {\r\n        this.$scope = $scope;\r\n        this.$timeout = $timeout;\r\n        this.powerBiService = powerBiService;\r\n    }\r\n    \r\n    init(element: HTMLElement) {\r\n        if(this.async) {\r\n            this.asyncEmbed(element);\r\n        }\r\n        else {\r\n            this.embed(element);\r\n        }\r\n    }\r\n    \r\n    asyncEmbed(element: HTMLElement) {\r\n        const debouncedEmbed = this.debounce(this.embed.bind(this), 500);\r\n        \r\n        if(this.embedUrl || this.accessToken) {\r\n            this.embed(element);\r\n        }\r\n        else {\r\n            this.$scope.$watch(() => this.embedUrl, (embedUrl, oldEmbedUrl) => {\r\n                // Guard against initialization\r\n                if(embedUrl === oldEmbedUrl) {\r\n                    return;\r\n                }\r\n                \r\n                if(embedUrl && embedUrl.length > 0) {\r\n                    debouncedEmbed(element);\r\n                }\r\n            });\r\n            \r\n            this.$scope.$watch(() => this.accessToken, (accessToken, oldAccessToken) => {\r\n                // Guard against initialization\r\n                if(accessToken === oldAccessToken) {\r\n                    return;\r\n                }\r\n                \r\n                if(accessToken && accessToken.length > 0) {\r\n                    debouncedEmbed(element);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    embed(element: HTMLElement) {\r\n        // TODO: Take from powerbi-config first, then from specific attributes for backwards compatibility\r\n        const config: pbi.IEmbedOptions = {\r\n            type: 'report',\r\n            embedUrl: this.embedUrl,\r\n            accessToken: this.accessToken,\r\n            filterPaneEnabled: this.filterPaneEnabled\r\n        };\r\n        \r\n        this.component = this.powerBiService.embed(element, config);\r\n    }\r\n    \r\n    remove(component: pbi.Embed) {\r\n        this.powerBiService.remove(this.component);\r\n    }\r\n    \r\n    // TODO: Look for alternative ways to prevent multiple attribute changes to cause multiple embeds for the same report\r\n    // By design the embedUrl and accessToken would always change at the same time, so this would always happen.\r\n    // Can't use simple isEmbedded flag becuase we want to re-use element and changing state of this is complicated\r\n    \r\n    private debounce(func: Function, wait: number): Function {\r\n        let previousTimeoutPromise;\r\n        \r\n        return (...args) => {\r\n            if(previousTimeoutPromise) {\r\n                this.$timeout.cancel(previousTimeoutPromise);\r\n            }\r\n            \r\n            previousTimeoutPromise = this.$timeout(() => func(...args), wait);\r\n        }\r\n    }\r\n}\r\n\r\nexport default class Directive {\r\n    // static name = \"powerbiReport\";\r\n    restrict = \"E\";\r\n    replace = true;\r\n    template = '<div class=\"powerbi-frame\"></div>';\r\n    scope = {\r\n        accessToken: \"=\",\r\n        async: \"=?\",\r\n        embedUrl: \"=\",\r\n        filter: \"=?\",\r\n        filterPaneEnabled: \"=?\"\r\n    };\r\n    controller = Controller;\r\n    bindToController = true;\r\n    controllerAs = \"vm\";\r\n    \r\n    link($scope: ng.IScope, element: HTMLElement, attributes: any, controller: Controller, transcludeFn: any) {\r\n        controller.init(element[0]);\r\n        \r\n        $scope.$on('$destroy', () => {\r\n            controller.remove(controller.component);\r\n        });\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/powerbi-report/component.ts\n **/","// TODO: Find way to remove this. The declaration file should be able to specify that inclusion of this library enables access to the global variable. \r\ndeclare global {\r\n    interface Window {\r\n        Powerbi: typeof pbi.PowerBi;\r\n    }\r\n}\r\n\r\nimport * as pbi from 'powerbi-client';\r\n\r\nexport default class PowerBiService {\r\n    // static name = \"PowerBiService\";\r\n    private powerBiCoreService: pbi.PowerBi;\r\n    \r\n    constructor() {\r\n        this.powerBiCoreService = new window.Powerbi();\r\n    }\r\n    \r\n    embed(element: HTMLElement, config: pbi.IPowerBiConfiguration): pbi.Embed {\r\n        return this.powerBiCoreService.embed(<pbi.IPowerBiElement>element, config);\r\n    }\r\n    \r\n    remove(component: pbi.Embed): void {\r\n        this.powerBiCoreService.remove(component);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/services/powerbi.ts\n **/"],"sourceRoot":""}